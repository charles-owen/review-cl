"use strict";(self.webpackChunkcse335=self.webpackChunkcse335||[]).push([[756],{9699:(e,i,t)=>{t(28878);var s=t(66759),n={class:"content"},r={class:"full"},o={class:"cl-submission-view"},a={key:0,class:"cl-preview yellow-pad"},l={key:1,class:"cl-preview"},u=["src"],c={class:"cl-preview-time"},v=(0,s._)("h2",null,"Review",-1),w={ref:"editor",class:"shadow"},f=(0,s._)("p",null,[(0,s._)("input",{type:"submit",value:"Submit Review"})],-1),m=(0,s._)("h2",null,"Previous Reviews",-1),d={key:0,class:"cl-reviews-none"},h={class:"cl-review"},p={class:"cl-submitted"},g={class:"cl-review-present"};function b(e,i){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=function(e,i){if(!e)return;if("string"==typeof e)return y(e,i);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return y(e,i)}(e))||i&&e&&"number"==typeof e.length){t&&(e=t);var s=0,n=function(){};return{s:n,n:function(){return s>=e.length?{done:!0}:{done:!1,value:e[s++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o=!0,a=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return o=e.done,e},e:function(e){a=!0,r=e},f:function(){try{o||null==t.return||t.return()}finally{if(a)throw r}}}}function y(e,i){(null==i||i>e.length)&&(i=e.length);for(var t=0,s=new Array(i);t<i;t++)s[t]=e[t];return s}const k={extends:t(79068).Z9,props:["json"],data:function(){return{reviewing:[],submissions:{}}},mounted:function(){this.setTitle("Peer Reviewing"),this.reviewing=this.json.reviewing;var e=this.$refs.editor;this.editor=new this.$site.Editor(e,{height:"10em",classes:["yellow-pad"]});var i,t={},s=b(this.json.submissions);try{for(s.s();!(i=s.n()).done;){var n=i.value;t[n.tag]={id:n.id,date:n.date}}}catch(e){s.e(e)}finally{s.f()}this.submissions=t},methods:{submit:function(){var e=this,i=this.editor.textarea.value.trim();if(""!==i){var t={type:"text/plain",text:i,submissions:this.submissions};this.$site.api.post("/api/review/review/".concat(this.json.id),t).then((function(i){i.hasError()?e.$site.toast(e,i):(e.editor.textarea.value="",e.reviewing=i.getData("reviewing").attributes,e.$site.toast(e,"Review successfully saved to the server"))})).catch((function(i){e.$site.toast(e,i)}))}else Site.toast(this,"You must enter some text to submit")},formatTime:function(e){return this.$site.TimeFormatter.relativeUNIX(e,null)},showSubmissions:function(e){var i=!1,t=e.meta.review.submissions;for(var s in t)t[s].id!==this.submissions[s].id&&(i=!0);return i?"For a past submission":""},previewImg:function(e){return this.$site.root+"/cl/review/img/"+e.id}}};var S=t(87619);const _=(0,S.Z)(k,[["render",function(e,i,t,b,y,k){return(0,s.wg)(),(0,s.iD)("div",n,[(0,s._)("div",r,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(t.json.submissions,(function(e){return(0,s.wg)(),(0,s.iD)("div",o,[(0,s._)("h2",null,(0,s.zw)(e.name),1),"text"===e.type?((0,s.wg)(),(0,s.iD)("pre",a,(0,s.zw)(e.text),1)):(0,s.kq)("v-if",!0),"image"===e.type?((0,s.wg)(),(0,s.iD)("figure",l,[(0,s._)("img",{src:k.previewImg(e)},null,8,u)])):(0,s.kq)("v-if",!0),(0,s._)("p",c,(0,s.zw)(k.formatTime(e.date)),1)])})),256)),v,(0,s._)("form",{method:"post",onSubmit:i[0]||(i[0]=(0,s.iM)((function(){return k.submit&&k.submit.apply(k,arguments)}),["prevent"]))},[(0,s._)("div",w,null,512),f],32),m,0===e.reviewing.length?((0,s.wg)(),(0,s.iD)("p",d,"*** None Yet ***")):(0,s.kq)("v-if",!0),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.reviewing,(function(e){return(0,s.wg)(),(0,s.iD)("div",h,[(0,s._)("h3",null,[(0,s.Uk)((0,s.zw)(k.formatTime(e.time))+" Review by Me ",1),(0,s._)("span",p,(0,s.zw)(k.showSubmissions(e)),1)]),(0,s._)("div",g,(0,s.zw)(e.meta.review.review),1)])})),256))])])}]]);var D={class:"cl-reviews"},T=(0,s._)("h3",null,"Reviews of this assignment appear here.",-1),x={key:0,class:"cl-reviews-none"},z={class:"cl-review"},R={key:0},j={key:1},$={class:"cl-submitted"},I={class:"cl-review-present"};const A={props:["json"],data:function(){return{assignTag:"",reviews:[]}},mounted:function(){this.assignTag=this.json.assignTag,this.reviews=this.json.reviews},methods:{formatTime:function(e){return this.$site.TimeFormatter.relativeUNIX(e,null)},showSubmissions:function(e){var i="";for(var t in e.submissions)""!==i&&(i+=" / "),i+=this.$site.TimeFormatter.absoluteUNIX(e.submissions[t].date);return""===i?"":"Submission: "+i}}},Z=(0,S.Z)(A,[["render",function(e,i,t,n,r,o){return(0,s.wg)(),(0,s.iD)("div",D,[T,0===e.reviews.length?((0,s.wg)(),(0,s.iD)("p",x,"*** None Yet ***")):(0,s.kq)("v-if",!0),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.reviews,(function(e){return(0,s.wg)(),(0,s.iD)("div",z,[(0,s._)("h3",{class:(0,s.C_)(void 0!==e.role?"staff":"")},[(0,s.Uk)((0,s.zw)(o.formatTime(e.time))+" ",1),void 0!==e.role?((0,s.wg)(),(0,s.iD)("span",R,"Staff Review")):((0,s.wg)(),(0,s.iD)("span",j,"Review")),(0,s.Uk)(" by "+(0,s.zw)(e.by)+" ",1),(0,s._)("span",$,(0,s.zw)(o.showSubmissions(e)),1)],2),(0,s._)("div",I,(0,s.zw)(e.review),1)])})),256))])}]]);Site.Review||(Site.ready((function(){Site.PageVue.create("div.cl-review","Review Vue",_),Site.InlineVue.create("div.cl-reviews",Z)})),Site.Review=!0)},69528:(e,i,t)=>{t.d(i,{Z:()=>a});var s=t(47289),n=t.n(s),r=t(38306),o=t.n(r)()(n());o.push([e.id,"div.cl-reviewing td.cl-empty{background-color:#e8f7f3}p.cl-reviews-none{text-align:center;color:#00723f;font-style:italic}div.cl-reviews h3{text-align:center;background:#00723f;color:#fff}div.cl-review{margin:1em 0}div.cl-review h3{font-size:.85em;font-style:italic;font-weight:normal;background:rgba(0,0,0,0);color:#00723f;border-bottom:1px solid #00723f;text-align:left}div.cl-review h3 span.cl-submitted{float:right;color:#00909e;font-size:.9em}div.cl-review h3.staff{color:red}div.cl-review pre{margin:0;white-space:pre-wrap}div.cl-review div.cl-review-present{margin:0;white-space:pre-wrap}",""]);const a=o},28878:(e,i,t)=>{var s=t(54571),n=t.n(s),r=t(50063),o=t.n(r),a=t(14971),l=t.n(a),u=t(78446),c=t.n(u),v=t(71984),w=t.n(v),f=t(63641),m=t.n(f),d=t(69528),h={};h.styleTagTransform=m(),h.setAttributes=c(),h.insert=l().bind(null,"head"),h.domAPI=o(),h.insertStyleElement=w();n()(d.Z,h),d.Z&&d.Z.locals&&d.Z.locals}},e=>{e.O(0,[736,77,530,592],(()=>{return i=9699,e(e.s=i);var i}));e.O()}]);