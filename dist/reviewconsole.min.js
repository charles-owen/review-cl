"use strict";(self.webpackChunkcse335=self.webpackChunkcse335||[]).push([[306,148],{67687:(e,t,n)=>{n.d(t,{m:()=>s});var i="cl_students_only",s=function(){};s.get=function(){return"yes"===window.localStorage.getItem(i)},s.set=function(e){window.localStorage.setItem(i,e?"yes":"no")}},44868:(e,t,n)=>{n.d(t,{R:()=>Ct.Z});var i=n(40722),s=n(34802),r={class:"content cl-members-editor"},o={class:"full"},a={key:0},l={key:0},u={class:"small"},c=(0,s._)("tr",null,[(0,s._)("th",{scope:"col"}),(0,s._)("th",{scope:"col"},"User"),(0,s._)("th",{scope:"col"},"Name"),(0,s._)("th",{scope:"col"},"Email"),(0,s._)("th",{scope:"col"},"Role"),(0,s._)("th",{scope:"col"},"Created")],-1),d={key:0,class:"cl-mgmt-options"},m=["src"],h=["onClick"],f=["src"],v={key:1},p={key:2},g={key:3},w=["onClick"],b=["src"],y={key:4},k=["onClick"],_={key:5},x=["onClick"],S=["href"],A={class:"small"},C={class:"small"},D={class:"center small"},R={key:1,class:"centerbox comp center"},$={key:1};var U=n(94975),E={class:"cl-bulk-upload"},M=(0,s._)("h2",{id:"bulk"},"Bulk course membership uploading",-1),T=(0,s._)("p",null,"This option accepts files in CSV format as produced by instructor systems. ",-1),I=(0,s._)("legend",null,"Bulk Upload File",-1),Z=(0,s._)("div",null,"File to upload: ",-1),N=(0,s._)("p",null,[(0,s._)("input",{type:"submit",value:"Press"}),(0,s.Uk)(" to upload the file!")],-1);var z=function(e){return(0,s.dD)("data-v-23f2b753"),e=e(),(0,s.Cn)(),e},j={id:"drops-component"},V=z((function(){return(0,s._)("p",null,"The following users are indicated as dropped from the uploaded course role. Select any you wish to flag as dropped in the system.",-1)})),B=z((function(){return(0,s._)("p",null,[(0,s.Uk)("Dropping a student does not remove them from the system, it only changes their status to "),(0,s._)("em",null,"dropped")],-1)})),q={scope:"col"},L=z((function(){return(0,s._)("th",{scope:"col"},"User",-1)})),O=z((function(){return(0,s._)("th",{scope:"col"},"Name",-1)})),H=z((function(){return(0,s._)("th",{scope:"col"},"Email",-1)})),K=z((function(){return(0,s._)("th",{scope:"col"},"Role",-1)})),Y=["onUpdate:modelValue"];const F={data:function(){return{drops:null,all:!1}},methods:{checkAll:function(e){var t=this;this.drops.forEach((function(e){e.drop=t.all}))}},mounted:function(){this.drops=this.$parent.drops}};var W=n(43546),P=n.n(W),Q=n(19104),X=n.n(Q),G=n(85797),J=n.n(G),ee=n(74706),te=n.n(ee),ne=n(10807),ie=n.n(ne),se=n(37002),re=n.n(se),oe=n(74271),ae={};ae.styleTagTransform=re(),ae.setAttributes=te(),ae.insert=J().bind(null,"head"),ae.domAPI=X(),ae.insertStyleElement=ie();P()(oe.Z,ae);oe.Z&&oe.Z.locals&&oe.Z.locals;var le=n(17944);const ue=(0,le.Z)(F,[["render",function(e,t,n,i,r,o){return(0,s.wg)(),(0,s.iD)("div",j,[V,B,(0,s._)("table",null,[(0,s._)("tr",null,[(0,s._)("th",q,[(0,s.wy)((0,s._)("input",{type:"checkbox","onUpdate:modelValue":t[0]||(t[0]=function(t){return e.all=t}),onChange:t[1]||(t[1]=(0,s.iM)((function(){return o.checkAll&&o.checkAll.apply(o,arguments)}),["prevent"]))},null,544),[[s.e8,e.all]])]),L,O,H,K]),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.drops,(function(e){return(0,s.wg)(),(0,s.iD)("tr",null,[(0,s._)("td",null,[(0,s.wy)((0,s._)("input",{type:"checkbox","onUpdate:modelValue":function(t){return e.drop=t}},null,8,Y),[[s.e8,e.drop]])]),(0,s._)("td",null,(0,s.zw)(e.userId),1),(0,s._)("td",null,(0,s.zw)(e.name),1),(0,s._)("td",null,(0,s.zw)(e.email),1),(0,s._)("td",null,(0,s.zw)(e.roleName()),1)])})),256))])])}],["__scopeId","data-v-23f2b753"]]);Site.Vue;var ce=Site.VueHelper;const de={data:function(){return{bulkFiles:null}},methods:{bulkUpload:function(){var e=this;if(!(null===this.bulkFiles||this.bulkFiles.length<1)){var t=this.bulkFiles[0],n=new FileReader;n.onload=function(t){var n=e.$store.state.user.user.member,i={file:t.target.result,semester:n.semester,section:n.section};Site.api.post("/api/course/members/bulk",i).then((function(t){if(t.hasError())console.log(t),Site.toast(e,t);else{var n=t.getData("drops");if(null!==n&&n.attributes.length>0){var i=[];n.attributes.forEach((function(e){console.log(e);var t=new Site.User(e);t.drop=!1,i.push(t)})),new U.Z({title:"Dropped Course Members",content:'<div id="drops"></div>',addClass:"cl-bulk-upload-dlg",buttons:[{contents:"Drop",focus:!0,click:function(t){t.close();var n=[];i.forEach((function(e){e.drop&&n.push(e.member.id)})),n.length>0?Site.api.post("/api/course/members/drops",{drops:n}).then((function(t){t.hasError()?(console.log(t),Site.toast(e,t)):window.history.go()})).catch((function(t){console.log(t),Site.toast(e,t)})):window.history.go()}},{contents:"Cancel",focus:!0,click:function(e){e.close()}}]});var s=ce.createApp({data:function(){return{drops:i}},template:'\n                      <drops :drops="drops"></drops>',components:{drops:ue}});s.config.globalProperties.$site=e.$site,s.mount("#drops")}else window.history.go()}})).catch((function(t){console.log(t),Site.toast(e,t)}))},n.onerror=function(e){Site.toast(this,"Error reading file")},n.onabort=function(e){Site.toast(this,"File read aborted")},n.readAsText(t)}}}};var me=n(24466),he={};he.styleTagTransform=re(),he.setAttributes=te(),he.insert=J().bind(null,"head"),he.domAPI=X(),he.insertStyleElement=ie();P()(me.Z,he);me.Z&&me.Z.locals&&me.Z.locals;const fe=(0,le.Z)(de,[["render",function(e,t,n,i,r,o){return(0,s.wg)(),(0,s.iD)("div",E,[M,T,(0,s._)("form",{class:"full",onSubmit:t[1]||(t[1]=(0,s.iM)((function(e){return o.bulkUpload()}),["prevent"])),method:"post",enctype:"multipart/form-data"},[(0,s._)("fieldset",null,[I,(0,s._)("div",null,[Z,(0,s._)("div",null,[(0,s._)("p",null,[(0,s._)("input",{name:"bulkfile",type:"file",onChange:t[0]||(t[0]=function(t){return e.bulkFiles=t.target.files})},null,32)]),N])])])],32)])}]]);function ve(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return pe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return pe(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,s=function(){};return{s,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:s}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){a=!0,r=e},f:function(){try{o||null==n.return||n.return()}finally{if(a)throw r}}}}function pe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var ge=Site.FetcherVue,we=Site.Vuex.mapState;const be={extends:Site.ConsoleComponentBase,props:["management"],data:function(){return{toUser:function(e){return this.root+"/cl/console/management/course/member/"+e.member.id},stats:""}},methods:{fetchMore:function(){this.$store.dispatch("members/more")},deleteUser:function(e){var t=this;new U.Z.MessageBox("Are you sure?","Are you sure you want to delete "+e.name,U.Z.MessageBox.OKCANCEL,(function(){t.$store.dispatch("members/delete",{id:e.member.id})}))},presentUser:function(e){var t='<div class="cl-dialog">\n<div class="tabular">\n<p><span class="label">User ID: </span><span>'.concat(e.userId,'</span></p>\n<p><span class="label">Name: </span><span>').concat(e.name,'</span></p>\n<p><span class="label">Email: </span><span>').concat(e.email,'</span></p>\n<p><span class="label">Role: </span><span>').concat(e.userRoleName(),"</span></p>\n</div>\n</div>");new U.Z({content:t})},computeStats:function(){var e,t=[],n=ve(this.users);try{for(n.s();!(e=n.n()).done;){var i=e.value.role();void 0===t[i]?t[i]=1:t[i]++}}catch(e){n.e(e)}finally{n.f()}this.stats=this.users.length+" members";var s=this.$store.state.user.user.getRoles();for(var r in t){var o=s[r],a=void 0!==o.short?o.short:o.name;this.stats+=" / "+t[r]+" "+a}}},computed:we({users:function(e){return e.members.users},fetcher:function(e){return e.members.fetcher}}),watch:{users:{handler:function(e,t){this.computeStats()},immediate:!0,deep:!0}},components:{"bulk-upload":fe,fetcher:ge},mounted:function(){var e=this;this.management?this.addComponent=this.$root.console.components.addNav2Link(this,"Add Member",5,(function(){e.$router.push(e.$site.root+"/cl/console/management/course/member/new")})):this.addComponent=null;var t=this.$store.state.user.user.member,n={semester:t.semester,section:t.section};this.$store.commit("members/query",n),this.$root.setTitle(": ".concat(t.semester,"/").concat(t.section," Members")),this.management&&this.$store.commit("users/reset"),this.$store.dispatch("members/fetch")},beforeUnmount:function(){this.addComponent&&this.$root.console.components.removeNav2(this,this.addComponent)}},ye=(0,le.Z)(be,[["render",function(e,t,n,i,U,E){var M=(0,s.up)("router-link"),T=(0,s.up)("fetcher"),I=(0,s.up)("bulk-upload");return(0,s.wg)(),(0,s.iD)("div",r,[(0,s._)("div",o,[e.fetcher.fetched?((0,s.wg)(),(0,s.iD)("div",a,[e.users.length>0?((0,s.wg)(),(0,s.iD)("div",l,[(0,s._)("table",u,[c,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.users,(function(t){return(0,s.wg)(),(0,s.iD)("tr",null,[n.management?((0,s.wg)(),(0,s.iD)("td",d,[(0,s.Wm)(M,{to:e.toUser(t)},{default:(0,s.w5)((function(){return[(0,s._)("img",{src:e.root+"/vendor/cl/site/img/pencil16.png",alt:"Edit",title:"Edit"},null,8,m)]})),_:2},1032,["to"]),(0,s.Uk)(" "),(0,s._)("a",{onClick:(0,s.iM)((function(e){return E.deleteUser(t)}),["prevent"])},[(0,s._)("img",{src:e.root+"/vendor/cl/site/img/x.png",alt:"Delete",title:"Delete"},null,8,f)],8,h)])):(0,s.kq)("v-if",!0),n.management?((0,s.wg)(),(0,s.iD)("td",v,[(0,s.Wm)(M,{to:e.toUser(t)},{default:(0,s.w5)((function(){return[(0,s.Uk)((0,s.zw)(t.userId),1)]})),_:2},1032,["to"])])):(0,s.kq)("v-if",!0),n.management?((0,s.wg)(),(0,s.iD)("td",p,[(0,s.Wm)(M,{to:e.toUser(t)},{default:(0,s.w5)((function(){return[(0,s.Uk)((0,s.zw)(t.name),1)]})),_:2},1032,["to"])])):(0,s.kq)("v-if",!0),n.management?(0,s.kq)("v-if",!0):((0,s.wg)(),(0,s.iD)("td",g,[(0,s._)("a",{onClick:(0,s.iM)((function(e){return E.presentUser(t)}),["prevent"]),href:"javascript:;"},[(0,s._)("img",{src:e.root+"/vendor/cl/site/img/info16.png",alt:"View",title:"View"},null,8,b)],8,w)])),n.management?(0,s.kq)("v-if",!0):((0,s.wg)(),(0,s.iD)("td",y,[(0,s._)("a",{onClick:(0,s.iM)((function(e){return E.presentUser(t)}),["prevent"]),href:"javascript:;"},(0,s.zw)(t.userId),9,k)])),n.management?(0,s.kq)("v-if",!0):((0,s.wg)(),(0,s.iD)("td",_,[(0,s._)("a",{onClick:(0,s.iM)((function(e){return E.presentUser(t)}),["prevent"]),href:"javascript:;"},(0,s.zw)(t.name),9,x)])),(0,s._)("td",null,[null!==t.email?((0,s.wg)(),(0,s.iD)("a",{key:0,href:"mailto:"+t.email},(0,s.zw)(t.email),9,S)):(0,s.kq)("v-if",!0)]),(0,s._)("td",A,(0,s.zw)(t.roleName(!0)),1),(0,s._)("td",C,(0,s.zw)(e.timeRelativeUNIX(t.member.created,null,"M-DD-YYYY")),1)])})),256))]),(0,s._)("p",D,[(0,s._)("em",null,(0,s.zw)(e.stats),1)])])):((0,s.wg)(),(0,s.iD)("p",R," There are currently no members enrolled in this section."))])):(0,s.kq)("v-if",!0),(0,s.Wm)(T,{fetcher:e.fetcher},null,8,["fetcher"]),e.fetcher.fetched?((0,s.wg)(),(0,s.iD)("div",$,[n.management?((0,s.wg)(),(0,s.j4)(I,{key:0})):(0,s.kq)("v-if",!0)])):(0,s.kq)("v-if",!0)])])}]]);var ke={class:"cl-member-editor content"},_e={class:"full"},xe=(0,s._)("input",{type:"hidden",name:"new",id:"new",value:""},null,-1),Se=(0,s._)("br",null,null,-1),Ae=["disabled"],Ce={class:"form_text"},De=(0,s._)("span",{class:"small"},"(last, first)",-1),Re=(0,s._)("br",null,null,-1),$e=["disabled"],Ue={class:"form_text"},Ee=(0,s._)("br",null,null,-1),Me=["disabled"],Te={class:"cl-radio-set"},Ie=(0,s._)("div",{class:"label"},[(0,s._)("em",null,"Role:")],-1),Ze={class:"options"},Ne=["value"],ze={class:"center"},je=(0,s._)("button",null,"Submit",-1),Ve={key:0,class:"centerbox primary"};const Be={props:["user"],data:function(){return{link:""}},watch:{user:function(e,t){var n=this.user,i=this.link;null!==n&&void 0!==n.prev?this.$root.console.components.nav2left={template:'\n            <router-link title="Previous Member" :to="link + user.prev.member.id"><img :src="icon"\n                                                                                       alt="Previous Member">\n            </router-link>',data:function(){return{icon:this.$site.root+"/cl/img/previcon.png",user:n,link:i}}}:this.$root.console.components.nav2left=null,null!==n&&void 0!==n.next?this.$root.console.components.nav2right={template:'\n            <router-link title="Next Member" :to="link + user.next.member.id"><img :src="icon" alt="Next Member">\n            </router-link>',data:function(){return{icon:this.$site.root+"/cl/img/nexticon.png",user:n,link:i}}}:this.$root.console.components.nav2right=null}},mounted:function(){var e=this.$route.path.match(/(^.*)\/([0-9]+)$/);null!==e&&(this.link=e[1]+"/")},beforeUnmount:function(){this.$root.console.components.nav2left=null,this.$root.console.components.nav2right=null}},qe=(0,le.Z)(Be,[["render",function(e,t,n,i,r,o){return(0,s.wg)(),(0,s.iD)("div")}]]);var Le=Site.FetcherVue;const Oe={extends:Site.ConsoleComponentBase,props:["id"],data:function(){return{legend:"new"===this.id?"New Member":"Edit Member",roles:this.visibleRoles,edituser:null,userId:"",name:"",email:"",role:"T",timer:null,seq:1,fetched:!1}},watch:{userId:function(e,t){var n=this;null!==this.timer&&(clearTimeout(this.timer),this.timer=null),this.timer=setTimeout((function(){n.fetch(e)}),300)},$route:function(e,t){this.take()}},computed:Site.Vuex.mapState({fetcher:function(e){return e.members.fetcher}}),components:{fetcher:Le,prevNext:qe},beforeCreate:function(){var e=(new i.N).getRoles();for(var t in this.visibleRoles={},e)!0!==e[t].skip&&(this.visibleRoles[t]=e[t])},mounted:function(){this.take()},methods:{take:function(){var e=this;if("new"===this.id)this.$root.setTitle(": Add Course Member"),this.$nextTick((function(){e.$refs.userid.select()})),this.edituser=null;else{this.$root.setTitle(": Course Member");var t=this.$store.state.user.user.member,n={id:this.id,semester:t.semester,section:t.section};this.$store.dispatch("members/get",n).then((function(t){e.edituser=t,e.userId=t.userId,e.name=null!==t.name?t.name:"",e.email=null!==t.email?t.email:"",e.role=t.role(),e.fetched=!0,e.$nextTick((function(){e.$refs.userid.select()}))})).catch((function(t){e.$site.toast(e,t),setTimeout((function(){e.$router.push({name:"members"})}),3e3)}))}},fetch:function(e){var t=this;"new"===this.id&&(""!==(e=e.trim())?(this.seq++,this.$site.api.get("/api/users",{userId:e,seq:this.seq}).then((function(e){if(e.hasError())t.$site.toast(t,e);else{if(+e.getData("seq").id!==t.seq)return;var n=e.getData("users");if(null!==n)if(n.attributes.length<1)t.fetched=!1;else{t.fetched=!0;var i=n.attributes[0];t.name=null!==i.name?i.name:"",t.email=null!==i.email?i.email:""}}})).catch((function(e){console.log(e),t.$site.toast(t,e)}))):this.fetched=!1)},submit:function(){var e=this,t=this.$store.state.user.user.member,n={userId:this.userId,name:this.name,email:this.email,role:this.role,semester:t.semester,section:t.section};"new"!==this.id&&(n.id=this.id);var i="new"===this.id?"members/new":"members/update";this.$store.dispatch(i,n).then((function(){e.$router.push({name:"members"})})).catch((function(t){console.log(t),e.$site.toast(e,t)}))},cancel:function(){this.$router.push({name:"members"})}}},He=(0,le.Z)(Oe,[["render",function(e,t,n,i,r,o){var a=(0,s.up)("prev-next"),l=(0,s.up)("fetcher"),u=(0,s.up)("router-link");return(0,s.wg)(),(0,s.iD)("div",ke,[(0,s._)("div",_e,[(0,s.Wm)(a,{user:e.edituser},null,8,["user"]),(0,s.Wm)(l,{fetcher:e.fetcher},null,8,["fetcher"]),(0,s._)("div",null,[(0,s._)("form",{class:"cl-common",onSubmit:t[5]||(t[5]=(0,s.iM)((function(){return o.submit&&o.submit.apply(o,arguments)}),["prevent"]))},[xe,(0,s._)("fieldset",null,[(0,s._)("legend",null,(0,s.zw)(e.legend),1),(0,s._)("p",null,[(0,s._)("label",null,[(0,s.Uk)("User ID"),Se,(0,s.wy)((0,s._)("input",{disabled:"new"!==n.id,ref:"userid",type:"text","onUpdate:modelValue":t[0]||(t[0]=function(t){return e.userId=t}),class:"short",size:"20",maxlength:"30"},null,8,Ae),[[s.nr,e.userId]])])]),(0,s._)("p",null,[(0,s._)("label",Ce,[(0,s.Uk)("Name "),De,Re,(0,s.wy)((0,s._)("input",{disabled:e.fetched,type:"text","onUpdate:modelValue":t[1]||(t[1]=function(t){return e.name=t}),maxlength:"150"},null,8,$e),[[s.nr,e.name]])])]),(0,s._)("p",null,[(0,s._)("label",Ue,[(0,s.Uk)("Email"),Ee,(0,s.wy)((0,s._)("input",{disabled:e.fetched,ref:"email",type:"email","onUpdate:modelValue":t[2]||(t[2]=function(t){return e.email=t}),maxlength:"254"},null,8,Me),[[s.nr,e.email]])])]),(0,s._)("div",Te,[Ie,(0,s._)("div",Ze,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.roles,(function(n,i){return(0,s.wg)(),(0,s.iD)("label",null,[(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.role=t}),name:"role",type:"radio",value:i},null,8,Ne),[[s.G2,e.role]]),(0,s.Uk)(" "+(0,s.zw)(n.name),1)])})),256))])]),(0,s._)("p",ze,[je,(0,s.Uk)("  "),(0,s._)("button",{onClick:t[4]||(t[4]=(0,s.iM)((function(){return o.cancel&&o.cancel.apply(o,arguments)}),["prevent"]))},"Cancel")])])],32),null!==e.edituser&&"new"!==n.id?((0,s.wg)(),(0,s.iD)("p",Ve,[(0,s.Uk)("User fields are not editable in this form. To go the "),(0,s.Wm)(u,{to:e.root+"/cl/console/management/user/"+e.edituser.id},{default:(0,s.w5)((function(){return[(0,s.Uk)("user editor page for "+(0,s.zw)(e.name),1)]})),_:1},8,["to"]),(0,s.Uk)(" to edit those fields.")])):(0,s.kq)("v-if",!0)])])])}]]);var Ke={key:0,class:"content"};var Ye={key:0,class:"cl-hot"},Fe=["innerHTML"],We={key:1},Pe=["innerHTML"],Qe={ref:"editor"},Xe=(0,s._)("button",{type:"submit"},"Submit",-1);const Ge={props:["item","hot"],mounted:function(){var e=this,t=this.$refs.editor;this.editor=new this.$site.Editor(t,{value:this.item.value,tab:!0,autoIndent:!0}),this.editor.textarea.addEventListener("keydown",(function(){e.changed()}))},methods:{changed:function(){var e=this;null!==this.timer&&(clearTimeout(this.timer),this.timer=null),this.timer=setTimeout((function(){e.timer=null,e.item.value=e.$site.Sanitize.sanitize(e.editor.textarea.value)}),100)},submit:function(){var e=this;this.$site.api.post("/api/course/home/"+this.item.tag,{value:this.item.value}).then((function(t){t.hasError()?e.$site.toast(e,t):e.$site.toast(e,"Content successfully saved")})).catch((function(t){e.$site.toast(e,t)}))}}},Je=(0,le.Z)(Ge,[["render",function(e,t,n,i,r,o){return(0,s.wg)(),(0,s.iD)("div",null,[(0,s._)("h2",null,(0,s.zw)(n.item.name),1),(0,s._)("form",{method:"post",onSubmit:t[0]||(t[0]=(0,s.iM)((function(e){return o.submit()}),["prevent"]))},["true"===n.hot?((0,s.wg)(),(0,s.iD)("div",Ye,[(0,s._)("div",{innerHTML:n.item.value},null,8,Fe)])):((0,s.wg)(),(0,s.iD)("div",We,[(0,s._)("div",{innerHTML:n.item.value},null,8,Pe)])),(0,s._)("div",Qe,null,512),Xe],32)])}]]);const et={extends:Site.ConsoleComponentBase,data:function(){return{active:!1,hot:{name:"Hot",tag:"hot",value:""}}},components:{courseHomeItemEditor:Je},created:function(){this.$root.setTitle(": Course Home Content");var e=this.user.member;this.section=this.$store.getters["course/section"](e.semester,e.section)},mounted:function(){var e=this;Site.api.get("/api/course/home",{}).then((function(t){if(t.hasError())Site.toast(e,t);else{var n=t.getData("course-home");e.set(n)}})).catch((function(t){console.log(t),Site.toast(e,t)}))},methods:{set:function(e){this.active=!0,this.hot.value=e.attributes.hot}}},tt=(0,le.Z)(et,[["render",function(e,t,n,i,r,o){var a=(0,s.up)("course-home-item-editor");return e.active?((0,s.wg)(),(0,s.iD)("div",Ke,[(0,s.Wm)(a,{item:e.hot,hot:"true"},null,8,["item"])])):(0,s.kq)("v-if",!0)}]]);var nt={class:"cl-section-component"},it={key:0},st=function(e){return(0,s.dD)("data-v-58756191"),e=e(),(0,s.Cn)(),e}((function(){return(0,s._)("span",{class:"extra"},null,-1)}));var rt={key:0};const ot={data:function(){var e=this;return{course:this.$store.state.course.course,selected:"FS18/730",changeSection:function(){var t=e.selected.split("/"),n={semester:t[0],section:t[1]};Site.api.post("/api/course/members/sectionselect",n).then((function(t){if(t.hasError())Site.toast(e,t);else{var n=t.getData("user");e.$store.commit("user/set",n.attributes),e.$store.commit("members/reset"),window.history.go()}})).catch((function(t){Site.toast(e,t)}))}}},mounted:function(){var e=this.$store.state.user.user.member;this.selected=e.semester+"/"+e.section}};var at=n(71621),lt={};lt.styleTagTransform=re(),lt.setAttributes=te(),lt.insert=J().bind(null,"head"),lt.domAPI=X(),lt.insertStyleElement=ie();P()(at.Z,lt);at.Z&&at.Z.locals&&at.Z.locals;const ut={props:["short"],data:function(){return{course:this.$store.state.course.course}},components:{"section-select":(0,le.Z)(ot,[["render",function(e,t,n,i,r,o){return(0,s.wg)(),(0,s.iD)("span",null,[1===e.course.sections.length?((0,s.wg)(),(0,s.iD)("span",rt,(0,s.zw)(e.selected),1)):(0,s.kq)("v-if",!0),e.course.sections.length>1?(0,s.wy)(((0,s.wg)(),(0,s.iD)("select",{key:1,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.selected=t}),onChange:t[1]||(t[1]=function(){return e.changeSection&&e.changeSection.apply(e,arguments)})},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.course.sections,(function(e){return(0,s.wg)(),(0,s.iD)("option",null,(0,s.zw)(e.semester)+"/"+(0,s.zw)(e.id),1)})),256))],544)),[[s.bM,e.selected]]):(0,s.kq)("v-if",!0)])}],["__scopeId","data-v-2e27ec9c"]])}};var ct=n(99582),dt={};dt.styleTagTransform=re(),dt.setAttributes=te(),dt.insert=J().bind(null,"head"),dt.domAPI=X(),dt.insertStyleElement=ie();P()(ct.Z,dt);ct.Z&&ct.Z.locals&&ct.Z.locals;const mt=(0,le.Z)(ut,[["render",function(e,t,n,i,r,o){var a=(0,s.up)("section-select");return(0,s.wg)(),(0,s.iD)("div",nt,[n.short?(0,s.kq)("v-if",!0):((0,s.wg)(),(0,s.iD)("span",it,(0,s.zw)(e.course.name)+" "+(0,s.zw)(e.course.desc),1)),(0,s.Wm)(a),st])}],["__scopeId","data-v-58756191"]]);var ht={class:"content cl-assignments"},ft={class:"full"},vt={class:"small"},pt={key:0};const gt={extends:Site.ConsoleComponentBase,data:function(){return{section:null,assignmentLinks:this.$root.console.course.assignmentLinks}},computed:{},created:function(){this.$root.setTitle(": Assignments");var e=this.user.member;this.section=this.$store.getters["course/section"](e.semester,e.section)},methods:{assignmentLink:function(e,t){return this.$site.root+"/cl/console"+t.replace(":assigntag",e.tag)},links:function(e){return this.assignmentLinks.filter((function(t){return void 0!==e[t.property]&&!1!==e[t.property]}))}}},wt=(0,le.Z)(gt,[["render",function(e,t,n,i,r,o){var a=(0,s.up)("router-link");return(0,s.wg)(),(0,s.iD)("div",ht,[(0,s._)("div",ft,[(0,s._)("p",null,(0,s.zw)(e.section.name),1),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.section.assignments.categories,(function(t){return(0,s.wg)(),(0,s.iD)("div",null,[(0,s._)("h2",null,(0,s.zw)(t.name),1),(0,s._)("ul",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(t.assignments,(function(t){return(0,s.wg)(),(0,s.iD)("li",{key:t.tag},[(0,s.Uk)((0,s.zw)(t.name)+" ",1),(0,s._)("span",vt,[(0,s._)("span",null,[(0,s.Wm)(a,{to:e.root+"/cl/console/course/dates/"+t.tag},{default:(0,s.w5)((function(){return[(0,s.Uk)("dates")]})),_:2},1032,["to"]),(0,s.Uk)("  ")]),(0,s._)("span",null,[(0,s.Wm)(a,{to:e.root+"/cl/console/course/extensions/"+t.tag},{default:(0,s.w5)((function(){return[(0,s.Uk)("extensions")]})),_:2},1032,["to"]),(0,s.Uk)("  ")]),void 0!==t.submissions?((0,s.wg)(),(0,s.iD)("span",pt,[(0,s.Wm)(a,{to:e.root+"/cl/console/course/submissions/"+t.tag},{default:(0,s.w5)((function(){return[(0,s.Uk)("submissions")]})),_:2},1032,["to"]),(0,s.Uk)("  ")])):(0,s.kq)("v-if",!0),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.links(t),(function(e){return(0,s.wg)(),(0,s.iD)("span",null,[(0,s.Wm)(a,{to:o.assignmentLink(t,e.route)},{default:(0,s.w5)((function(){return[(0,s.Uk)((0,s.zw)(e.name),1)]})),_:2},1032,["to"]),(0,s.Uk)("  ")])})),256))])])})),128))])])})),256))])])}]]);var bt={class:"content cl-extensions"},yt={class:"full"},kt={key:0,class:"small"},_t=(0,s._)("tr",null,[(0,s._)("th",null,"User"),(0,s._)("th",null,"Name"),(0,s._)("th",null,"Role"),(0,s._)("th",null,"Extension")],-1),xt=(0,s._)("a",{"data-toggle":"",title:"Toggle Calendar"},[(0,s._)("span",{class:"icons-cl icons-cl-calendar"})],-1),St={"data-clear":""},At=["src"];var Ct=n(52497),Dt=n(25386);n(90675);const Rt={extends:Site.ConsoleComponentBase,props:["assigntag"],data:function(){return{assignment:null,date:null,extensions:null,test:null,fpConfig:{enableTime:!0,dateFormat:"m-d-Y h:iK",defaultHour:23,defaultMinute:55,wrap:!0}}},components:{membersfetcher:Ct.Z,flatPickr:Dt.Z},mounted:function(){var e=this,t=this.$store.state.user.user.member;this.section=this.$store.getters["course/section"](t.semester,t.section),this.assignment=this.section.getAssignment(this.assigntag),this.setTitle(": "+this.assignment.shortname+" Extensions");var n={semester:t.semester,section:t.section};Site.api.get("/api/course/members/meta/get/extensions/"+this.assigntag,n).then((function(t){if(t.hasError())Site.toast(e,t);else{var n=t.getData("member-meta");if(null!==n)for(var i in e.extensions=[],n.attributes){var s=n.attributes[i];e.extensions[+i]=null==s?"":1e3*s}}})).catch((function(t){console.log(t),Site.toast(e,t)}))},methods:{change:function(e,t){var n=this,i=e[0],s={value:""!==i?new Date(i).getTime()/1e3:null};Site.api.post("/api/course/members/meta/set/".concat(t.member.id,"/extensions/").concat(this.assigntag),s).then((function(e){e.hasError()&&Site.toast(n,e)})).catch((function(e){console.log(e),Site.toast(n,e)}))},clear:function(e){Site.Vue.set(this.extensions,+e.member.id,"")}}};var $t=n(26385),Ut={};Ut.styleTagTransform=re(),Ut.setAttributes=te(),Ut.insert=J().bind(null,"head"),Ut.domAPI=X(),Ut.insertStyleElement=ie();P()($t.Z,Ut);$t.Z&&$t.Z.locals&&$t.Z.locals;const Et=(0,le.Z)(Rt,[["render",function(e,t,n,i,r,o){var a=(0,s.up)("flat-pickr"),l=(0,s.up)("membersfetcher");return(0,s.wg)(),(0,s.iD)("div",bt,[(0,s._)("div",yt,[(0,s.Wm)(l,{fetching:null===e.extensions},{default:(0,s.w5)((function(t){return[null!==e.extensions?((0,s.wg)(),(0,s.iD)("table",kt,[_t,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(t.users,(function(t){return(0,s.wg)(),(0,s.iD)("tr",null,[(0,s._)("td",null,(0,s.zw)(t.userId),1),(0,s._)("td",null,(0,s.zw)(t.name),1),(0,s._)("td",null,(0,s.zw)(t.roleName()),1),(0,s._)("td",null,[(0,s._)("div",null,[(0,s.Wm)(a,{modelValue:e.extensions[+t.member.id],"onUpdate:modelValue":function(n){return e.extensions[+t.member.id]=n},config:e.fpConfig,onOnChange:function(e){return o.change(e,t)},"data-input":""},null,8,["modelValue","onUpdate:modelValue","config","onOnChange"]),xt,(0,s.Uk)(),(0,s._)("a",St,[(0,s._)("img",{src:e.root+"/cl/img/x.png",alt:"delete",title:"Delete"},null,8,At)])])])])})),256))])):(0,s.kq)("v-if",!0)]})),_:1},8,["fetching"])])])}]]);var Mt={class:"content cl-assignment-dates"},Tt={class:"full"},It={key:0,class:"cl-form-common"},Zt={class:"cl-form-border cl-center"},Nt=(0,s._)("div",{class:"cl-form-legend"},"Assignment Dates",-1),zt={style:{display:"inline-block"}},jt={class:"cl-no-expand"},Vt=(0,s._)("br",null,null,-1),Bt=(0,s._)("a",{"data-toggle":"",title:"Toggle Calendar"},[(0,s._)("span",{class:"icons-cl icons-cl-calendar"})],-1),qt={"data-clear":""},Lt=["src"],Ot={class:"cl-no-expand"},Ht=(0,s._)("br",null,null,-1),Kt=(0,s._)("a",{"data-toggle":"",title:"Toggle Calendar"},[(0,s._)("span",{class:"icons-cl icons-cl-calendar"})],-1),Yt={"data-clear":""},Ft=["src"],Wt={key:0},Pt={key:0},Qt={class:"cl-no-expand"},Xt=(0,s._)("br",null,null,-1),Gt=(0,s._)("a",{"data-toggle":"",title:"Toggle Calendar"},[(0,s._)("span",{class:"icons-cl icons-cl-calendar"})],-1),Jt={"data-clear":""},en=["src"],tn={class:"cl-center"},nn=(0,s._)("p",{class:"centerbox primary"},"Dynamic assignment date revisions override those in the assignments specification file. Once set, the revisions replace the results from the assignments specification file. Clear removes the dynamic assignments as specified on this page and restores the assignments specified in the assignments specification file.",-1);const sn={extends:Site.ConsoleComponentBase,props:["assigntag"],data:function(){return{assignment:null,date:null,release:null,released:!1,due:null,revised:!1,hasReviews:!0,review:null,fetched:!1,fpConfig:{enableTime:!0,dateFormat:"m/d/Y h:iK",defaultHour:23,defaultMinute:55,wrap:!0}}},components:{flatPickr:Dt.Z},mounted:function(){var e=this.$store.state.user.user.member;this.section=this.$store.getters["course/section"](e.semester,e.section),this.assignment=this.section.getAssignment(this.assigntag),this.setTitle(": "+this.assignment.shortname+" Dates"),this.load()},methods:{set:function(e){null!==e&&(this.fetched=!0,"open"===e.attributes.release?(this.release="",this.released=!0):"none"===e.attributes.release?(this.release="",this.released=!1):(this.release=new Date(1e3*e.attributes.release).toISOString(),this.released=!0),"none"!==e.attributes.due?this.due=new Date(1e3*e.attributes.due).toISOString():this.due="",this.revised="yes"===e.attributes.revised,void 0===e.attributes.review?this.hasReviews=!1:"none"===e.attributes.review?(this.hasReviews=!0,this.review=""):(this.hasReviews=!0,this.review=new Date(1e3*e.attributes.review).toISOString()))},changeRelease:function(e){e.length>0&&""!==e[0]&&(this.released=!0)},changeReleased:function(e){this.released||(this.release="")},send:function(){var e=this,t={revised:this.revised?"yes":"no"};this.released?""===this.release?t.release="open":t.release=this.release:t.release="none",""===this.due?t.due="none":t.due=this.due,this.hasReviews&&(""===this.review?t.review="none":t.review=this.review),Site.api.post("/api/course/dates/".concat(this.assigntag),t).then((function(t){if(t.hasError())Site.toast(e,t);else{Site.toast(e,"Assignment date revisions set");var n=t.getData("assignment-dates");e.set(n)}})).catch((function(t){console.log(t),Site.toast(e,t)}))},clear:function(){var e=this;this.fetched=!1,Site.api.post("/api/course/dates/".concat(this.assigntag,"/clear"),{}).then((function(t){t.hasError()?Site.toast(e,t):(Site.toast(e,"Assignment date revisions cleared"),e.load())})).catch((function(t){console.log(t),Site.toast(e,t)}))},load:function(){var e=this;Site.api.get("/api/course/dates/"+this.assigntag,{}).then((function(t){if(t.hasError())Site.toast(e,t);else{var n=t.getData("assignment-dates");e.set(n)}})).catch((function(t){console.log(t),Site.toast(e,t)}))}}},rn=(0,le.Z)(sn,[["render",function(e,t,n,i,r,o){var a=(0,s.up)("flat-pickr");return(0,s.wg)(),(0,s.iD)("div",Mt,[(0,s._)("div",Tt,[e.fetched?((0,s.wg)(),(0,s.iD)("div",It,[(0,s._)("div",Zt,[Nt,(0,s._)("div",zt,[(0,s._)("p",null,[(0,s._)("span",jt,[(0,s._)("label",null,[(0,s.Uk)("Release"),Vt,(0,s.Wm)(a,{modelValue:e.release,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.release=t}),config:e.fpConfig,onOnChange:t[1]||(t[1]=function(e){return o.changeRelease(e)}),"data-input":""},null,8,["modelValue","config"]),Bt,(0,s.Uk)(),(0,s._)("a",qt,[(0,s._)("img",{src:e.root+"/cl/img/x.png",alt:"delete",title:"Delete"},null,8,Lt)])]),(0,s.Uk)("  "),(0,s._)("label",null,[(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.released=t}),onChange:t[3]||(t[3]=function(e){return o.changeReleased(e)}),type:"checkbox"},null,544),[[s.e8,e.released]]),(0,s.Uk)(" Released")])])]),(0,s._)("p",null,[(0,s._)("span",Ot,[(0,s._)("label",null,[(0,s.Uk)("Due"),Ht,(0,s.Wm)(a,{modelValue:e.due,"onUpdate:modelValue":t[4]||(t[4]=function(t){return e.due=t}),config:e.fpConfig,"data-input":""},null,8,["modelValue","config"]),Kt,(0,s.Uk)(),(0,s._)("a",Yt,[(0,s._)("img",{src:e.root+"/cl/img/x.png",alt:"delete",title:"Delete"},null,8,Ft)])]),(0,s.Uk)("  "),""!==e.due?((0,s.wg)(),(0,s.iD)("label",Wt,[(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":t[5]||(t[5]=function(t){return e.revised=t}),type:"checkbox"},null,512),[[s.e8,e.revised]]),(0,s.Uk)(" Revised")])):(0,s.kq)("v-if",!0)])]),e.hasReviews?((0,s.wg)(),(0,s.iD)("p",Pt,[(0,s._)("span",Qt,[(0,s._)("label",null,[(0,s.Uk)("Reviews"),Xt,(0,s.Wm)(a,{modelValue:e.review,"onUpdate:modelValue":t[6]||(t[6]=function(t){return e.review=t}),config:e.fpConfig,"data-input":""},null,8,["modelValue","config"]),Gt,(0,s.Uk)(),(0,s._)("a",Jt,[(0,s._)("img",{src:e.root+"/cl/img/x.png",alt:"delete",title:"Delete"},null,8,en)])])])])):(0,s.kq)("v-if",!0),(0,s._)("p",tn,[(0,s._)("button",{onClick:t[7]||(t[7]=function(){return o.send&&o.send.apply(o,arguments)})},"Set"),(0,s.Uk)("   "),(0,s._)("button",{onClick:t[8]||(t[8]=function(){return o.clear&&o.clear.apply(o,arguments)})},"Clear")])])])])):(0,s.kq)("v-if",!0),nn])])}]]);var on={class:"content"},an={class:"full"},ln=(0,s._)("p",{class:"center"},"Click on a user to view submissions for that user.",-1),un={class:"small"},cn=(0,s._)("tr",null,[(0,s._)("th",null,"User"),(0,s._)("th",null,"Name"),(0,s._)("th",null,"Role")],-1);var dn={class:"cl-submissions-bulk"},mn={key:0,class:"center"},hn=["onClick"],fn=["onClick"],vn=["src"],pn={key:1},gn=["onUpdate:modelValue"],wn=["onUpdate:modelValue"],bn={key:2},yn=(0,s._)("br",null,null,-1);function kn(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return _n(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _n(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,s=function(){};return{s,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:s}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){a=!0,r=e},f:function(){try{o||null==n.return||n.return()}finally{if(a)throw r}}}}function _n(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}const xn={extends:Site.ConsoleComponentBase,props:["assignment"],data:function(){return{links:[],from:"",to:""}},watch:{assignment:function(){this.take()}},computed:{},mounted:function(){this.take()},methods:{take:function(){if(this.links=[],null!==this.assignment&&void 0!==this.assignment.submissions){var e,t=kn(this.assignment.submissions);try{for(t.s();!(e=t.n()).done;){var n=e.value;if(!0===n.bulk){var s={text:"Bulk download of "+n.name,url:"/cl/course/submissions/"+this.assignment.tag+"/"+n.tag,from:"",to:"",range:!1,atLeast:i.N.STAFF};this.links.push(s)}if(void 0!==n.links){var r,o=kn(n.links);try{for(o.s();!(r=o.n()).done;){var a=r.value;this.links.push(a)}}catch(e){o.e(e)}finally{o.f()}}}}catch(e){t.e(e)}finally{t.f()}}},click:function(e){var t=this.root+e.url;void 0===e.from||void 0===e.to||""===e.from.trim()&&""===e.to.trim()||(t+="?fm="+encodeURIComponent(e.from.trim())+"&to="+encodeURIComponent(e.to.trim())),window.location.href=t}}};var Sn=n(93814),An={};An.styleTagTransform=re(),An.setAttributes=te(),An.insert=J().bind(null,"head"),An.domAPI=X(),An.insertStyleElement=ie();P()(Sn.Z,An);Sn.Z&&Sn.Z.locals&&Sn.Z.locals;const Cn=(0,le.Z)(xn,[["render",function(e,t,n,i,r,o){return(0,s.wg)(),(0,s.iD)("div",dn,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.links,(function(t){return(0,s.wg)(),(0,s.iD)(s.HY,null,[e.user.atLeast(t.atLeast)?((0,s.wg)(),(0,s.iD)("p",mn,[(0,s._)("a",{onClick:(0,s.iM)((function(e){return o.click(t)}),["prevent"])},(0,s.zw)(t.text),9,hn),void 0===t.from||t.range?(0,s.kq)("v-if",!0):((0,s.wg)(),(0,s.iD)("a",{key:0,title:"Enable Range",onClick:(0,s.iM)((function(e){return t.range=!0}),["prevent"])},[(0,s._)("img",{src:e.root+"/cl/img/range.png",alt:"Enable Range",width:"26",height:"10"},null,8,vn)],8,fn)),t.range?((0,s.wg)(),(0,s.iD)("span",pn,[(0,s.wy)((0,s._)("input",{type:"text","onUpdate:modelValue":function(e){return t.from=e}},null,8,gn),[[s.nr,t.from]]),(0,s.Uk)(" to "),(0,s.wy)((0,s._)("input",{type:"text","onUpdate:modelValue":function(e){return t.to=e}},null,8,wn),[[s.nr,t.to]])])):(0,s.kq)("v-if",!0),t.range?((0,s.wg)(),(0,s.iD)("span",bn,[yn,(0,s.Uk)("Enter from/to range for user id.")])):(0,s.kq)("v-if",!0)])):(0,s.kq)("v-if",!0)],64)})),256))])}]]);const Dn={extends:Site.ConsoleComponentBase,props:["assigntag"],data:function(){return{link:Site.root+"/cl/console/course/submissions/"+this.assigntag+"/",assignment:null}},components:{membersfetcher:Ct.Z,submissionsLinks:Cn},mounted:function(){var e=this.$store.state.user.user.member;e.semester,e.section;this.section=this.$store.getters["course/section"](e.semester,e.section),this.assignment=this.section.getAssignment(this.assigntag),this.$root.setTitle(": "+this.assignment.shortname+" Submissions")}},Rn=(0,le.Z)(Dn,[["render",function(e,t,n,i,r,o){var a=(0,s.up)("submissions-links"),l=(0,s.up)("router-link"),u=(0,s.up)("membersfetcher");return(0,s.wg)(),(0,s.iD)("div",on,[(0,s._)("div",an,[(0,s.Wm)(u,null,{default:(0,s.w5)((function(t){return[ln,(0,s.Wm)(a,{assignment:e.assignment},null,8,["assignment"]),(0,s._)("table",un,[cn,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(t.users,(function(t){return(0,s.wg)(),(0,s.iD)("tr",null,[(0,s._)("td",null,[(0,s.Wm)(l,{to:e.link+t.member.id},{default:(0,s.w5)((function(){return[(0,s.Uk)((0,s.zw)(t.userId),1)]})),_:2},1032,["to"])]),(0,s._)("td",null,[(0,s.Wm)(l,{to:e.link+t.member.id},{default:(0,s.w5)((function(){return[(0,s.Uk)((0,s.zw)(t.name),1)]})),_:2},1032,["to"])]),(0,s._)("td",null,(0,s.zw)(t.roleName()),1)])})),256))])]})),_:1})])])}]]);var $n={class:"content"},Un={class:"full"},En={key:0};const Mn={props:["user","assigntag"],data:function(){return{assignment:null,submissions:[]}},watch:{user:function(){this.submissions=[],this.fetch(this.user)}},components:{submissionVue:n(66931).Z},mounted:function(){this.fetch(this.user)},methods:{fetch:function(e){var t=this;e.member.getSection(this.$store);this.assignment=e.member.getAssignment(this.$store,this.assigntag),void 0!==this.assignment.submissions?this.$site.api.get("/api/course/submission/submissions/"+this.assigntag+"/"+e.member.id,{}).then((function(n){if(n.hasError())t.$site.toast(t,n);else{var i=n.getDataAll("submissions");t.submissions=[];for(var s=0;s<i.length;s++)t.submissions.push(i[s].attributes),t.submissions[s].user=e}})).catch((function(e){t.$site.toast(t,e)})):this.submissions=[]}}},Tn=(0,le.Z)(Mn,[["render",function(e,t,n,i,r,o){var a=(0,s.up)("submission-vue");return(0,s.wg)(),(0,s.iD)("div",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.submissions,(function(e){return(0,s.wg)(),(0,s.iD)("div",null,[(0,s._)("h2",null,(0,s.zw)(e.name),1),(0,s.Wm)(a,{submission:e},null,8,["submission"])])})),256))])}]]);var In=n(67687);const Zn={props:{id:{default:0},faillink:{default:null}},emits:["fetched"],data:function(){return{user:null}},watch:{id:function(e,t){this.fetch()}},mounted:function(){this.fetch()},components:{fetcher:Site.FetcherVue},methods:{fetch:function(){var e=this,t=this.$store.state.user.user.member,n={id:this.id,semester:t.semester,section:t.section};In.m.get()&&(n.role=i.N.STUDENT),this.$store.dispatch("members/get",n).then((function(t){e.user=t,e.userId=t.userId,e.$emit("fetched",e.user)})).catch((function(t){Site.toast(e,t),null!==e.faillink&&setTimeout((function(){e.$router.push({path:Site.root+e.faillink})}),3e3)}))}}},Nn=(0,le.Z)(Zn,[["render",function(e,t,n,i,r,o){return(0,s.wg)(),(0,s.iD)("div",null,[(0,s.WI)(e.$slots,"default",{user:e.user})])}]]);const zn={extends:Site.ConsoleComponentBase,props:["assigntag","memberid"],data:function(){return{submissionsLink:"/cl/console/course/submissions/"+this.assigntag}},components:{memberfetcher:Nn,prevNext:qe,submissions:Tn},mounted:function(){this.$root.setTitle(": Submissions"),this.addNav2Link("Exit",4,"/cl/console/course/submissions/"+this.assigntag)},methods:{fetched:function(e){var t=e.member.getAssignment(this.$store,this.assigntag);this.$root.setTitle(": "+e.name+" "+t.shortname+" Submissions")}}},jn=(0,le.Z)(zn,[["render",function(e,t,n,i,r,o){var a=(0,s.up)("prev-next"),l=(0,s.up)("submissions"),u=(0,s.up)("memberfetcher");return(0,s.wg)(),(0,s.iD)("div",$n,[(0,s._)("div",Un,[(0,s.Wm)(u,{onFetched:o.fetched,id:n.memberid,faillink:e.submissionsLink},{default:(0,s.w5)((function(e){return[(0,s.Wm)(a,{user:e.user},null,8,["user"]),null!==e.user?((0,s.wg)(),(0,s.iD)("div",En,[(0,s.Wm)(l,{user:e.user,assigntag:n.assigntag},null,8,["user","assigntag"])])):(0,s.kq)("v-if",!0)]})),_:1},8,["onFetched","id","faillink"])])])}]]);var Vn={class:"content"},Bn={class:"full"},qn=["ensure"],Ln={class:"center"},On=(0,s._)("th",null,"User",-1),Hn=(0,s._)("th",null,"Name",-1),Kn=(0,s._)("th",null,"Email",-1),Yn=(0,s._)("th",null,"Role",-1),Fn=["onUpdate:modelValue"],Wn=["href"];var Pn={class:"to"},Qn={key:0,class:"no-email"},Xn={key:1},Gn={key:0},Jn={class:"subject"},ei={ref:"editor"},ti={class:"buttons"},ni=function(e){return(0,s.dD)("data-v-4948184f"),e=e(),(0,s.Cn)(),e}((function(){return(0,s._)("input",{type:"submit",value:"Send"},null,-1)}));function ii(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return si(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return si(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,s=function(){};return{s,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:s}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){a=!0,r=e},f:function(){try{o||null==n.return||n.return()}finally{if(a)throw r}}}}function si(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var ri=Site.Site.MaskVue;const oi={props:["to"],emits:["cancel","done"],data:function(){return{displayTo:[],subject:"",mask:!1}},components:{maskVue:ri},mounted:function(){var e=this.$refs.editor;this.editor=new this.$site.Editor(e,{tab:!0,autoIndent:!0}),this.displayTo=[];for(var t=0;t<this.to.length&&t<10;t++)this.displayTo.push(this.to[t])},methods:{cancel:function(){this.$emit("cancel")},submit:function(){var e=this;if(!this.mask){var t=this.subject.trim();if(""!==t){var n=this.editor.textarea.value;if(""!==n){var i,s=[],r=ii(this.to);try{for(r.s();!(i=r.n()).done;){var o=i.value;null!==o.email&&s.push({name:o.name,email:o.email})}}catch(e){r.e(e)}finally{r.f()}if(0!==s.length){var a={to:s,subject:t,message:n};this.mask=!0,this.$site.api.post("/api/course/email",a).then((function(t){e.mask=!1,t.hasError()?e.$site.toast(e,t):e.$emit("done")})).catch((function(t){e.mask=!1,e.$site.toast(e,t)}))}else this.$emit("done")}else this.$site.toast(this,"Must provide a message")}else this.$site.toast(this,"Must provide a subject")}}}};var ai=n(22724),li={};li.styleTagTransform=re(),li.setAttributes=te(),li.insert=J().bind(null,"head"),li.domAPI=X(),li.insertStyleElement=ie();P()(ai.Z,li);ai.Z&&ai.Z.locals&&ai.Z.locals;const ui=(0,le.Z)(oi,[["render",function(e,t,n,i,r,o){var a=(0,s.up)("mask-vue");return(0,s.wg)(),(0,s.iD)("form",{onSubmit:t[2]||(t[2]=(0,s.iM)((function(){return o.submit&&o.submit.apply(o,arguments)}),["prevent"]))},[(0,s.Wm)(a,{mask:e.mask},{default:(0,s.w5)((function(){return[(0,s.Uk)("Sending Email...")]})),_:1},8,["mask"]),(0,s._)("div",Pn,[(0,s.Uk)("To "),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.displayTo,(function(e){return(0,s.wg)(),(0,s.iD)("div",{key:e.id},[(0,s.Uk)((0,s.zw)(e.name)+" <",1),null===e.email?((0,s.wg)(),(0,s.iD)("span",Qn,"no email")):((0,s.wg)(),(0,s.iD)("span",Xn,(0,s.zw)(e.email),1)),(0,s.Uk)("> ")])})),128)),this.to.length>this.displayTo.length?((0,s.wg)(),(0,s.iD)("div",Gn,"...")):(0,s.kq)("v-if",!0)]),(0,s._)("div",Jn,[(0,s._)("label",null,[(0,s.Uk)("Subject "),(0,s.wy)((0,s._)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=function(t){return e.subject=t})},null,512),[[s.nr,e.subject]])])]),(0,s._)("div",ei,null,512),(0,s._)("p",ti,[ni,(0,s._)("input",{type:"button",value:"Cancel",onClick:t[1]||(t[1]=(0,s.iM)((function(){return o.cancel&&o.cancel.apply(o,arguments)}),["prevent"]))})])],32)}],["__scopeId","data-v-4948184f"]]);function ci(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return di(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return di(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,s=function(){};return{s,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:s}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){a=!0,r=e},f:function(){try{o||null==n.return||n.return()}finally{if(a)throw r}}}}function di(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}const mi={extends:Site.ConsoleComponentBase,data:function(){return{all:!1,flags:{},users:{},composing:!1,toUsers:[]}},components:{membersfetcher:Ct.Z,emailEditor:ui},mounted:function(){this.$store.state.user.user.member;this.setTitle(": Course Email"),this.addSendEmail()},methods:{allChange:function(){for(var e in this.flags)this.flags[e]=this.all},ensure:function(e){var t,n=ci(e);try{for(n.s();!(t=n.n()).done;){var i=t.value;void 0===this.flags[i.id]&&(this.flags[i.id]=!1,this.users[i.id]=i)}}catch(e){n.e(e)}finally{n.f()}},addSendEmail:function(){var e=this;this.sendEmail=this.addNav2("Send Email",3,(function(){for(var t in e.toUsers=[],e.flags)e.flags[t]&&e.toUsers.push(e.users[t]);0!==e.toUsers.length?(e.removeNav2(e.sendEmail),e.composing=!0):new U.Z.MessageBox("No indicated members!","Must specify members to send email to.",U.Z.MessageBox.OK,(function(){}))}))},cancelEmail:function(){this.composing=!1,this.addSendEmail()},doneSending:function(){for(var e in this.composing=!1,this.all=!1,this.flags)this.flags[e]=!1;this.addSendEmail()}}};var hi=n(57784),fi={};fi.styleTagTransform=re(),fi.setAttributes=te(),fi.insert=J().bind(null,"head"),fi.domAPI=X(),fi.insertStyleElement=ie();P()(hi.Z,fi);hi.Z&&hi.Z.locals&&hi.Z.locals;const vi=(0,le.Z)(mi,[["render",function(e,t,n,i,r,o){var a=(0,s.up)("membersfetcher"),l=(0,s.up)("email-editor");return(0,s.wg)(),(0,s.iD)("div",Vn,[(0,s._)("div",Bn,[e.composing?((0,s.wg)(),(0,s.j4)(l,{key:1,onCancel:o.cancelEmail,onDone:o.doneSending,to:e.toUsers},null,8,["onCancel","onDone","to"])):((0,s.wg)(),(0,s.j4)(a,{key:0},{default:(0,s.w5)((function(n){return[(0,s._)("table",{class:"small",ensure:o.ensure(n.users)},[(0,s._)("tr",null,[(0,s._)("th",Ln,[(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.all=t}),type:"checkbox",onChange:t[1]||(t[1]=function(){return o.allChange&&o.allChange.apply(o,arguments)})},null,544),[[s.e8,e.all]])]),On,Hn,Kn,Yn]),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(n.users,(function(t){return(0,s.wg)(),(0,s.iD)("tr",{key:t.id},[(0,s._)("td",null,[(0,s.wy)((0,s._)("input",{type:"checkbox","onUpdate:modelValue":function(n){return e.flags[t.id]=n}},null,8,Fn),[[s.e8,e.flags[t.id]]])]),(0,s._)("td",null,(0,s.zw)(t.userId),1),(0,s._)("td",null,(0,s.zw)(t.name),1),(0,s._)("td",null,[(0,s._)("a",{href:"mailto:"+t.email},(0,s.zw)(t.email),9,Wn)]),(0,s._)("td",null,(0,s.zw)(t.roleName()),1)])})),128))],8,qn)]})),_:1}))])])}]]);var pi={class:"content"},gi={class:"full"},wi={class:"small"},bi=(0,s._)("tr",null,[(0,s._)("th",null,"User"),(0,s._)("th",null,"Name"),(0,s._)("th",null,"Role")],-1),yi=["onClick"],ki=["onClick"];const _i={extends:Site.ConsoleComponentBase,components:{membersfetcher:Ct.Z},mounted:function(){this.setTitle(": Member Spoofing")},computed:{availableUsers:function(e){var t=this;return console.log(e),(0,s.IU)(e).filter((function(e){return t.user.atLeast(e.role())}))}},methods:{select:function(e){var t=this,n={user:e.id,member:e.member.id};this.$site.api.post("/api/course/members/spoof",n).then((function(e){e.hasError()?t.$site.toast(t,e):window.location=t.root+"/"})).catch((function(e){t.$site.toast(t,e)}))}}},xi=(0,le.Z)(_i,[["render",function(e,t,n,i,r,o){var a=(0,s.up)("membersfetcher");return(0,s.wg)(),(0,s.iD)("div",pi,[(0,s._)("div",gi,[(0,s.Wm)(a,null,{default:(0,s.w5)((function(e){return[(0,s._)("table",wi,[bi,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.users,(function(e){return(0,s.wg)(),(0,s.iD)("tr",null,[(0,s._)("td",null,[(0,s._)("a",{onClick:(0,s.iM)((function(t){return o.select(e)}),["prevent"])},(0,s.zw)(e.userId),9,yi)]),(0,s._)("td",null,[(0,s._)("a",{onClick:(0,s.iM)((function(t){return o.select(e)}),["prevent"])},(0,s.zw)(e.name),9,ki)]),(0,s._)("td",null,(0,s.zw)(e.roleName()),1)])})),256))])]})),_:1})])])}]]);Site.PrevNextMemberVue=qe,Site.MemberFetcherComponentVue=Nn,Site.SubmissionsAssignmentMemberComponentVue=Tn,Site.MembersFetcherComponentVue=Ct.Z,Site.SubmissionsLinksVue=Cn,Site.CourseConsole||(Site.CourseConsole=new function(e){var t=e.console;this.assignmentLinks=[],this.assignmentLink=function(e,t,n){this.assignmentLinks.push({property:e,name:t,route:n})},t.title="Course Console",t.tables.add({title:"Course",order:20,api:"/api/course/tables"});var n={title:"Main",route:"",order:1};t.components.addOption({atLeast:i.N.STAFF,page:n,section:{title:"Course",order:5},title:"Members",order:1,route:"/course/members",routes:[{route:"/course/members",component:ye,props:{management:!1}}]}),t.components.addOption({atLeast:i.N.INSTRUCTOR,page:n,section:{title:"Course",order:5},title:"Course Home",order:2,route:"/course/home",routes:[{route:"/course/home",component:tt}]}),t.components.addOption({atLeast:i.N.STAFF,page:n,section:{title:"Course",order:5},title:"Assignments",order:2,route:"/course/assignments",routes:[{route:"/course/assignments",component:wt}]}),t.components.addOption({atLeast:{tag:"course-spoofing",default:i.N.TA},page:n,section:{title:"Course",order:5},title:"Member Spoofing",order:3,route:"/course/spoofing",routes:[{route:"/course/spoofing",component:xi}]}),t.components.addOption({atLeast:i.N.TA,page:n,section:{title:"Course",order:5},title:"Email Members",order:4,route:"/course/email",routes:[{route:"/course/email",component:vi}]}),t.components.addOption({atLeast:i.N.ADMIN,page:{title:"Management",route:"/management",order:10},section:{title:"Course Management",order:1},title:"Members",order:1,route:"/management/course/members",routes:[{route:"/management/course/members",name:"members",component:ye,props:{management:!0}},{route:"/management/course/member/:id",name:"member",component:He,props:!0}]}),t.components.addRoutes([{route:"/course/extensions/:assigntag",component:Et,props:!0},{route:"/course/dates/:assigntag",component:rn,props:!0},{route:"/course/submissions/:assigntag",component:Rn,props:!0},{route:"/course/submissions/:assigntag/:memberid",name:"submissions",component:jn,props:!0}]),t.components.addNav2(mt,10),this.SubmissionsLinksVue=Cn}(Site),Site.Console.CourseConsole=Site.CourseConsole,Site.Console.course=Site.CourseConsole)},63901:(e,t,n)=>{n(7765);var i=n(34802),s=function(e){return(0,i.dD)("data-v-4138024c"),e=e(),(0,i.Cn)(),e},r={class:"content"},o={class:"full cl-reviewing"},a={key:0},l={style:{display:"flex","justify-content":"center"}},u={class:"center"},c=s((function(){return(0,i._)("button",{type:"submit"},"Assign Reviews",-1)})),d=["value"],m={style:{"margin-left":"10px"}},h={class:"center",style:{"padding-top":"3.5px"}},f=s((function(){return(0,i._)("label",{for:"anonCheckbox"}," Anonymous Reviewing",-1)})),v={class:"small"},p=s((function(){return(0,i._)("th",{class:"width38px"},null,-1)})),g=s((function(){return(0,i._)("th",null,"±Reviewee",-1)})),w=s((function(){return(0,i._)("th",null,"±Reviewer",-1)})),b=["src"],y=s((function(){return(0,i._)("th",null,"User ID",-1)})),k=["src"],_=["src"],x=["onClick"],S=["src"],A={class:"aligncontrols"},C=["onClick"],D=["src"],R=["onClick"],$=["src"],U={class:"aligncontrols"},E=["onClick"],M=["src"],T=["onClick"],I=["src"],Z={class:"small"};var N=n(84716),z=n(44868);const j={extends:N.X,props:["assigntag","statusUser","count"]};var V=n(17944);const B=(0,V.Z)(j,[["render",function(e,t,n,s,r,o){var a=(0,i.up)("router-link");return null!==n.statusUser?((0,i.wg)(),(0,i.j4)(a,{key:0,to:e.root+"/cl/console/grading/"+n.assigntag+"/"+n.statusUser.member.id,title:n.statusUser.name},{default:(0,i.w5)((function(){return[(0,i.Uk)((0,i.zw)(n.statusUser.userId)+"/"+(0,i.zw)(n.count),1)]})),_:1},8,["to","title"])):(0,i.kq)("v-if",!0)}]]);var q={id:"cl-review-reassign-selector"};var L=n(46149);const O={extends:L.Z,inheritAttrs:!1,props:["sortedUsers","reassignUser","assignType"],name:"ReviewReassign",data:function(){return{}}},H=(0,V.Z)(O,[["render",function(e,t,n,s,r,o){return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i._)("p",null,"Student: "+(0,i.zw)(n.reassignUser.name),1),(0,i._)("div",null,[(0,i._)("label",null,(0,i.zw)(n.assignType)+": ",1),(0,i._)("select",q,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.sortedUsers,(function(e){return(0,i.wg)(),(0,i.iD)("option",null,(0,i.zw)(e),1)})),256))])])],64)}]]);var K={id:"cl-review-remove-selector"};const Y={extends:L.Z,inheritAttrs:!1,props:["assignedReviews","removeUser","removeType"],name:"ReviewRemove",data:function(){return{}}},F=(0,V.Z)(Y,[["render",function(e,t,n,s,r,o){return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i._)("p",null,"Student: "+(0,i.zw)(n.removeUser.name),1),(0,i._)("div",null,[(0,i._)("label",null,(0,i.zw)(n.removeType)+": ",1),(0,i._)("select",K,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.assignedReviews,(function(e){return(0,i.wg)(),(0,i.iD)("option",null,(0,i.zw)(e),1)})),256))])])],64)}]]);L.Z;function W(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return P(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return P(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,s=function(){};return{s,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:s}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){a=!0,r=e},f:function(){try{o||null==n.return||n.return()}finally{if(a)throw r}}}}function P(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var Q=Site.site.VueDialog,X={reviewer:1,reviewee:2,name:3};const G={extends:N.X,props:["assigntag"],data:function(){return{assignment:null,reviewerCnt:2,instructor:Site.Member.INSTRUCTOR,staff:Site.Member.STAFF,student:Site.Member.STUDENT,reviewers:null,reviewees:null,maxReviewees:0,maxReviewers:0,mail:Site.root+"/vendor/cl/site/img/mail.png",plus:Site.root+"/vendor/cl/site/img/add-circle.png",remove:Site.root+"/vendor/cl/site/img/x.png",check:Site.root+"/cl/img/check16.png",sortKey:X.name,SortKey:X,anon:!1}},components:{membersfetcher:z.R,"status-present":B},mounted:function(){var e=this;this.addComponent=this.$root.console.components.addNav2Link(this,"Send Reminders",1,(function(){e.maybeSendNotification()}));var t=this.$store.state.user.user.member;this.section=this.$store.getters["course/section"](t.semester,t.section),this.assignment=this.section.getAssignment(this.assigntag),this.setTitle(": "+this.assignment.shortname+" Reviewing"),this.$site.api.get("/api/review/anonStatus/"+this.assigntag,{}).then((function(t){t.hasError()?e.$site.toast(e,t):e.updateAnon(t)})).catch((function(t){e.$site.toast(e,t)})),this.$site.api.get("/api/review/reviewers/"+this.assigntag,{}).then((function(t){t.hasError()?e.$site.toast(e,t):e.take(t)})).catch((function(t){e.$site.toast(e,t)}))},beforeUnmount:function(){this.addComponent&&this.$root.console.components.removeNav2(this,this.addComponent)},methods:{assignReviews:function(){var e=this;this.maxReviewees>0||this.maxReviewers>0?new this.$site.Dialog.MessageBox("Are you sure?","Are you sure you want to assign reviewers? This will replace the existing reviewing assignments.",this.$site.Dialog.MessageBox.OKCANCEL,(function(){e.assignReviewsActual()})):this.assignReviewsActual()},assignReviewsActual:function(){var e=this;this.reviewers=null,this.reviewees=null,this.maxReviewees=0,this.maxReviewers=0;var t={cnt:this.reviewerCnt};this.$site.api.post("/api/review/reviewers/"+this.assigntag,t).then((function(t){t.hasError()?e.$site.toast(e,t):e.take(t)})).catch((function(t){e.$site.toast(e,t)}))},anonymousReviewing:function(){var e=this;!1===this.anon?new this.$site.Dialog.MessageBox("Are you sure?","Are you sure you want to enable Anonymous Reviewing? This will make reviewer and reviewee names hidden during peer-reviewing.",this.$site.Dialog.MessageBox.OKCANCEL,(function(){e.setAnonymous()})):new this.$site.Dialog.MessageBox("Are you sure?","Are you sure you want to disable Anonymous Reviewing? This will make reviewer and reviewee names visible during peer-reviewing.",this.$site.Dialog.MessageBox.OKCANCEL,(function(){e.setAnonymous()}))},setAnonymous:function(){var e=this;this.$site.api.post("/api/review/anonStatus/"+this.assigntag,{}).then((function(t){t.hasError()?e.$site.toast(e,t):(e.updateAnon(t),!0===e.anon?e.$site.toast(e,"Anonymous Reviews Enabled!"):e.$site.toast(e,"Anonymous Reviews Disabled!"))})).catch((function(t){e.$site.toast(e,t)}))},take:function(e){var t=e.getData("reviewers").attributes;this.reviewers={},this.reviewees={},this.maxReviewees=0,this.maxReviewers=0;var n,i=W(t);try{for(i.s();!(n=i.n()).done;){var s=n.value,r=+s[0],o=+s[1],a=+s[2];void 0===this.reviewers[r]&&(this.reviewers[r]=[]),this.reviewers[r].push([o,a]),this.reviewers[r].length>this.maxReviewees&&(this.maxReviewees=this.reviewers[r].length),void 0===this.reviewees[o]&&(this.reviewees[o]=[]),this.reviewees[o].push([r,a]),this.reviewees[o].length>this.maxReviewers&&(this.maxReviewers=this.reviewees[o].length)}}catch(e){i.e(e)}finally{i.f()}},updateAnon:function(e){var t=e.getData("anonymous").attributes;this.anon=t},displayUser:function(e,t,n){if(void 0===t||n>=t.length)return null;var i,s=W(e);try{for(s.s();!(i=s.n()).done;){var r=i.value;if(r.member.id===t[n][0])return r}}catch(e){s.e(e)}finally{s.f()}return null},cls:function(e,t){return void 0===e||t>=e.length?"td.cl-reviews-none":e[t][1]<1?"cl-empty":""},maybeSendNotification:function(){var e=this;new this.$site.Dialog.MessageBox("Are you sure?","Are you sure you want to send a reminder for reviews to the entire class?",this.$site.Dialog.MessageBox.OKCANCEL,(function(){e.sendNotification()}))},sendNotification:function(){var e=this,t=this.$site,n=this.assigntag;t.api.post("/api/review/notify/"+n,{memberId:"null",isClass:!0}).then((function(n){if(n.hasError())t.toast(e,n);else{var i=n.getData("notificationsSent").attributes;t.toast(e,i+" Notifications Sent!")}}))},adjustedMaxValue:function(e,t,n){var i=this,s=0;return e.forEach((function(r){i.countReviews(e,r,n)<t&&s++})),s<e.length/2?t:t-1},getBackgroundColor:function(e,t){if(0===t)return"rgb(255, 255, 255)";var n=255-e/t*75,i=255-e/t*75;return"rgb(".concat(255,", ").concat(n,", ").concat(i,")")},removeDialog:function(e,t,n){var i=[];if("Reviewee"===t)for(var s=0;s<this.maxReviewees;s++)this.displayUser(n,this.reviewers[e.member.id],s)&&i.push(this.displayUser(n,this.reviewers[e.member.id],s).name);else if("Reviewer"===t)for(var r=0;r<this.maxReviewers;r++)this.displayUser(n,this.reviewees[e.member.id],r)&&i.push(this.displayUser(n,this.reviewees[e.member.id],r).name);var o=this.$site,a=this.assigntag,l=this,u=[{contents:"Remove",click:function(i){for(var s,r,u=this,c=document.querySelector("#cl-review-remove-selector"),d=c.options[c.selectedIndex].innerHTML,m=0;m<n.length;m++)n[m].name===d&&("Reviewer"===t?(s=n[m],r=e):(s=e,r=n[m]));var h={reviewer:s,reviewee:r};o.api.post("/api/review/remove/"+a,h).then((function(e){e.hasError()?o.toast(u,e):(o.toast(u,"Removal Complete"),l.take(e)),i.close()}))}}];new Q(this.$site,{title:"Remove "+t,vue:F,data:function(){return{assignedReviews:i,removeUser:e,removeType:t}},buttons:u,parent:this})},reassignDialog:function(e,t,n){var i=this.sortUsersByReviewCount(n,e,t),s=this.$site,r=this.assigntag,o=this,a=[{contents:"Reassign",click:function(i){for(var a,l,u=this,c=document.querySelector("#cl-review-reassign-selector"),d=c.options[c.selectedIndex].innerHTML,m=0;m<n.length;m++)n[m].name===d&&("Reviewer"===t?(a=n[m],l=e):(a=e,l=n[m]));var h={reviewer:a,reviewee:l};s.api.post("/api/review/reassign/"+r,h).then((function(e){e.hasError()?s.toast(u,e):(s.toast(u,"Reassignment Made"),o.take(e)),i.close()}))}}];new Q(this.$site,{title:"Reassign "+t,vue:H,data:function(){return{sortedUsers:i,reassignUser:e,assignType:t}},buttons:a,parent:this})},maybeIndividualNotification:function(e,t){var n=this;new this.$site.Dialog.MessageBox("Are you sure?","Are you sure you want to send a reminder to "+t+"?",this.$site.Dialog.MessageBox.OKCANCEL,(function(){n.individualNotification(e)}))},individualNotification:function(e){var t=this,n=this.$site,i=this.assigntag,s={memberId:e,isClass:!1};n.api.post("/api/review/notify/"+i,s).then((function(e){if(e.hasError())n.toast(t,e);else{var i=e.getData("notificationUnavailable").attributes,s=e.getData("notificationsSent").attributes;i?n.toast(t,"Notification cancelled: user has not submitted"):1==s?n.toast(t,"Notification sent!"):n.toast(t,"Notification cancelled: no reviews need to be done.")}}))},sortUsersByReviewCount:function(e,t,n){for(var i={},s=0;s<e.length;s++)if(e[s].name!=t.name&&!e[s].atLeast(this.staff)&&e[s].atLeast(this.student)){if("Reviewee"===n){var r=!1;if(void 0!==this.reviewers[t.member.id])for(var o=0;o<this.reviewers[t.member.id].length;o++)if(e[s].member.id===this.reviewers[t.member.id][o][0]){r=!0;break}!1===r&&(i[e[s].name]=this.countReviews(e,e[s],n))}if("Reviewer"===n){var a=!1;if(void 0!==this.reviewees[t.member.id])for(var l=0;l<this.reviewees[t.member.id].length;l++)if(e[s].member.id===this.reviewees[t.member.id][l][0]){a=!0;break}!1===a&&(i[e[s].name]=this.countReviews(e,e[s],n))}}var u=Object.keys(i).map((function(e){return[e,i[e]]}));return u.sort((function(e,t){return e[1]-t[1]})),u.map((function(e){return e[0]}))},countReviews:function(e,t,n){var i=0;if("Reviewee"===n)for(var s=0;s<this.maxReviewers;s++)this.displayUser(e,this.reviewees[t.member.id],s)&&i++;else if("Reviewer"===n)for(var r=0;r<this.maxReviewees;r++)this.displayUser(e,this.reviewers[t.member.id],r)&&i++;return i},sort:function(e){var t,n=this,i=e;function s(e,t){return e>t?-1:t>e?1:0}switch(this.sortKey){case X.name:t=function(e,t){return s(t.name,e.name)};break;case X.reviewer:t=function(e,t){var r=n.countReviews(i,e,"Reviewee")-n.countReviews(i,t,"Reviewee");return 0!==r?r:s(t.name,e.name)};break;case X.reviewee:t=function(e,t){var r=n.countReviews(i,e,"Reviewer")-n.countReviews(i,t,"Reviewer");return 0!==r?r:s(t.name,e.name)}}var r=e.sort(t);return console.log(r),console.log(this.maxReviewers),r},setSortBy:function(e){this.sortKey=e}},computed:{adjustedMaxReviewers:function(){var e=this.adjustedMaxValue(this.fetcher.users,this.maxReviewers,"Reviewer");return console.log("Adjusted Max Reviewers:",e),e},adjustedMaxReviewees:function(){var e=this.adjustedMaxValue(this.fetcher.users,this.maxReviewees,"Reviewee");return console.log("Adjusted Max Reviewees:",e),e}}};var J=n(43546),ee=n.n(J),te=n(19104),ne=n.n(te),ie=n(85797),se=n.n(ie),re=n(74706),oe=n.n(re),ae=n(10807),le=n.n(ae),ue=n(37002),ce=n.n(ue),de=n(73581),me={};me.styleTagTransform=ce(),me.setAttributes=oe(),me.insert=se().bind(null,"head"),me.domAPI=ne(),me.insertStyleElement=le();ee()(de.Z,me);de.Z&&de.Z.locals&&de.Z.locals;const he=(0,V.Z)(G,[["render",function(e,t,n,s,N,z){var j=this,V=(0,i.up)("router-link"),B=(0,i.up)("status-present"),q=(0,i.up)("membersfetcher");return(0,i.wg)(),(0,i.iD)("div",r,[(0,i._)("div",o,[(0,i.Wm)(q,{fetching:null===e.reviewers},{default:(0,i.w5)((function(s){return[e.user.atLeast(e.instructor)?((0,i.wg)(),(0,i.iD)("div",a,[(0,i._)("div",l,[(0,i._)("form",{method:"post",onSubmit:t[1]||(t[1]=(0,i.iM)((function(){return z.assignReviews&&z.assignReviews.apply(z,arguments)}),["prevent"]))},[(0,i._)("p",u,[c,(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.reviewerCnt=t})},[((0,i.wg)(),(0,i.iD)(i.HY,null,(0,i.Ko)(6,(function(e){return(0,i._)("option",{value:e},(0,i.zw)(e),9,d)})),64))],512),[[i.bM,e.reviewerCnt]])])],32),(0,i._)("form",{method:"post",onClick:t[3]||(t[3]=(0,i.iM)((function(){return z.anonymousReviewing&&z.anonymousReviewing.apply(z,arguments)}),["prevent"]))},[(0,i._)("div",m,[(0,i._)("p",h,[f,(0,i.wy)((0,i._)("input",{type:"checkbox",id:"anonCheckbox",name:"anonCheckbox",style:{"margin-left":"3px"},"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.anon=t})},null,512),[[i.e8,e.anon]])])])])])])):(0,i.kq)("v-if",!0),(0,i._)("table",v,[(0,i._)("tr",null,[p,g,w,(0,i.kq)("Making it so that clicking the table header for Name sets the name sort key, also make check image pop up"),(0,i._)("th",{title:"Sort By Name",alt:"Sort By Name",onClick:t[4]||(t[4]=(0,i.iM)((function(t){return z.setSortBy(e.SortKey.name)}),["prevent"])),style:{cursor:"pointer"}},[e.sortKey===e.SortKey.name?((0,i.wg)(),(0,i.iD)("img",{key:0,src:e.check},null,8,b)):(0,i.kq)("v-if",!0),(0,i.Uk)(" Name")]),y,(0,i.kq)("Making it so that clicking the table header for Reviewee sets the reviewee sort key, also make check image pop up"),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.maxReviewees,(function(n){return(0,i.wg)(),(0,i.iD)("th",{title:"Sort By Reviewees Needed",alt:"Sort By Reviewees Needed",onClick:t[5]||(t[5]=(0,i.iM)((function(t){return z.setSortBy(e.SortKey.reviewee)}),["prevent"])),style:{cursor:"pointer"}},[e.sortKey===e.SortKey.reviewee?((0,i.wg)(),(0,i.iD)("img",{key:0,src:e.check},null,8,k)):(0,i.kq)("v-if",!0),(0,i.Uk)(" reviewee")])})),256)),(0,i.kq)("Making it so that clicking the table header for Reviewer sets the reviewer sort key, also make check image pop up"),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.maxReviewers,(function(n){return(0,i.wg)(),(0,i.iD)("th",{title:"Sort By Reviewers Needed",alt:"Sort By Reviewers Needed",onClick:t[6]||(t[6]=(0,i.iM)((function(t){return z.setSortBy(e.SortKey.reviewer)}),["prevent"])),style:{cursor:"pointer"}},[e.sortKey===e.SortKey.reviewer?((0,i.wg)(),(0,i.iD)("img",{key:0,src:e.check},null,8,_)):(0,i.kq)("v-if",!0),(0,i.Uk)(" reviewer")])})),256))]),(0,i.kq)("Calling sort on the users to make sure it is sorted based on the sort key"),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(z.sort(s.users),(function(t){return(0,i.wg)(),(0,i.iD)("tr",null,[(0,i._)("td",null,[(0,i._)("a",{onClick:(0,i.iM)((function(e){return z.maybeIndividualNotification(t.member.id,t.name)}),["prevent"]),href:"javascript:;"},[(0,i._)("img",{src:e.mail,title:"Email",alt:"Email"},null,8,S)],8,x)]),(0,i._)("td",{style:(0,i.j5)({backgroundColor:z.getBackgroundColor(z.adjustedMaxValue(s.users,e.maxReviewers,"Reviewer")-j.countReviews(s.users,t,"Reviewer"),z.adjustedMaxValue(s.users,e.maxReviewers,"Reviewer"))})},[(0,i._)("div",A,[(0,i._)("a",{onClick:(0,i.iM)((function(e){return z.reassignDialog(t,"Reviewee",s.users)}),["prevent"]),href:"javascript:;"},[(0,i._)("img",{src:e.plus,title:"Add Reviewee",alt:"Add Reviewee"},null,8,D)],8,C),(0,i._)("a",{onClick:(0,i.iM)((function(e){return z.removeDialog(t,"Reviewee",s.users)}),["prevent"]),href:"javascript:;"},[(0,i._)("img",{src:e.remove,title:"Remove Reviewee",alt:"Remove Reviewee"},null,8,$)],8,R)])],4),(0,i._)("td",{style:(0,i.j5)([j.countReviews(s.users,t,"Reviewee")<z.adjustedMaxValue(s.users,e.maxReviewees,"Reviewee")?{backgroundColor:z.getBackgroundColor(z.adjustedMaxValue(s.users,e.maxReviewees,"Reviewee")-j.countReviews(s.users,t,"Reviewee"),z.adjustedMaxValue(s.users,e.maxReviewees,"Reviewee"))}:{}])},[(0,i._)("div",U,[(0,i._)("a",{onClick:(0,i.iM)((function(e){return z.reassignDialog(t,"Reviewer",s.users)}),["prevent"]),href:"javascript:;"},[(0,i._)("img",{src:e.plus,title:"Add Reviewer",alt:"Add Reviewer"},null,8,M)],8,E),(0,i._)("a",{onClick:(0,i.iM)((function(e){return z.removeDialog(t,"Reviewer",s.users)}),["prevent"]),href:"javascript:;"},[(0,i._)("img",{src:e.remove,title:"Remove Reviewer",alt:"Remove Reviewer"},null,8,I)],8,T)])],4),(0,i._)("td",Z,[(0,i.Wm)(V,{title:t.name,to:e.root+"/cl/console/grading/"+n.assigntag+"/"+t.member.id},{default:(0,i.w5)((function(){return[(0,i.Uk)((0,i.zw)(t.name),1)]})),_:2},1032,["title","to"])]),(0,i._)("td",null,[(0,i.Wm)(V,{title:t.name,to:e.root+"/cl/console/grading/"+n.assigntag+"/"+t.member.id},{default:(0,i.w5)((function(){return[(0,i.Uk)((0,i.zw)(t.userId),1)]})),_:2},1032,["title","to"])]),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.maxReviewees,(function(r){return(0,i.wg)(),(0,i.iD)("td",{class:(0,i.C_)(z.cls(e.reviewers[t.member.id],r-1))},[(0,i.kq)("Changed ternary operator for count to check if reviewer array has enough entries                "),(0,i.Wm)(B,{assigntag:n.assigntag,"status-user":z.displayUser(s.users,e.reviewers[t.member.id],r-1),count:void 0!==e.reviewers[t.member.id]&&r-1<e.reviewers[t.member.id].length?e.reviewers[t.member.id][r-1][1]:0},null,8,["assigntag","status-user","count"])],2)})),256)),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.maxReviewers,(function(r){return(0,i.wg)(),(0,i.iD)("td",{class:(0,i.C_)(z.cls(e.reviewees[t.member.id],r-1))},[(0,i.Wm)(B,{assigntag:n.assigntag,"status-user":z.displayUser(s.users,e.reviewees[t.member.id],r-1),count:void 0!==e.reviewees[t.member.id]&&r-1<e.reviewees[t.member.id].length?e.reviewees[t.member.id][r-1][1]:0},null,8,["assigntag","status-user","count"])],2)})),256))])})),256))])]})),_:1},8,["fetching"])])])}],["__scopeId","data-v-4138024c"]]);var fe={class:"cl-reviews"},ve=(0,i._)("h2",null,"Staff Review",-1),pe={ref:"editor"},ge=(0,i._)("p",null,[(0,i._)("input",{type:"submit",value:"Submit Review"})],-1),we=(0,i._)("h3",null,"Reviews by this user.",-1),be={key:0,class:"center"},ye={class:"cl-review"},ke={key:0},_e={key:1},xe={class:"cl-submitted"},Se={class:"cl-review-present"},Ae={key:0,style:{"font-weight":"bold"}},Ce=(0,i._)("h3",null,"Reviews of this user's assignment.",-1),De={key:1,class:"center"},Re={class:"cl-review"},$e={key:0},Ue={key:1},Ee={key:2},Me={key:3},Te={key:4},Ie={class:"cl-submitted"},Ze={class:"cl-review-present"};function Ne(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return ze(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ze(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,s=function(){};return{s,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:s}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){a=!0,r=e},f:function(){try{o||null==n.return||n.return()}finally{if(a)throw r}}}}function ze(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}const je={props:["user","assigntag"],data:function(){return{forReviews:[],byReviews:[],staffRole:Site.Member.STAFF,submissions:[]}},components:{reviewsVue:n(66689).Z},watch:{user:function(){this.forReviews=[],this.byReviews=[],this.submissions=[],this.fetch()}},mounted:function(){var e=this.$refs.editor;this.editor=new this.$site.Editor(e,{height:"10em",classes:["yellow-pad"]}),this.fetch()},methods:{fetch:function(){var e=this;this.$site.api.get("/api/review/reviews/"+this.assigntag+"/"+this.user.member.id,{}).then((function(t){t.hasError()?e.$site.toast(e,t):e.take(t)})).catch((function(t){e.$site.toast(e,t)}))},take:function(e){var t=e.getData("reviews-by-for").attributes,n=e.getData("assignment-submissions");null!==n&&(this.submissions=n.attributes);var i,s=Ne(t.for);try{for(s.s();!(i=s.n()).done;){var r=i.value;r.reviewer=new Site.User(r.reviewer)}}catch(e){s.e(e)}finally{s.f()}var o,a=Ne(t.by);try{for(a.s();!(o=a.n()).done;){var l=o.value;l.reviewee=new Site.User(l.reviewee)}}catch(e){a.e(e)}finally{a.f()}this.forReviews=t.for,this.byReviews=t.by},submit:function(){var e=this,t=this.editor.textarea.value.trim();if(""!==t){var n={};for(var i in this.submissions)n[i]={id:this.submissions[i][0].id,date:this.submissions[i][0].date};var s={type:"text/plain",text:t,submissions:n};Site.api.post("/api/review/staffreview/".concat(this.assigntag,"/").concat(this.user.member.id),s).then((function(t){t.hasError()?Site.toast(e,t):(e.editor.textarea.value="",e.take(t),Site.toast(e,"Review successfully saved to the server"))})).catch((function(t){Site.toast(e,t)}))}else Site.toast(this,"You must enter some text to submit")},formatTime:function(e){return this.$site.TimeFormatter.relativeUNIX(e,null)},showSubmissions:function(e){var t=e.meta.review.submissions,n="";for(var i in t)n+=this.$site.TimeFormatter.absoluteUNIX(t[i].date);return""===n?"":"Submission: "+n}}},Ve=(0,V.Z)(je,[["render",function(e,t,n,s,r,o){return(0,i.wg)(),(0,i.iD)("div",fe,[ve,(0,i._)("form",{method:"post",onSubmit:t[0]||(t[0]=(0,i.iM)((function(){return o.submit&&o.submit.apply(o,arguments)}),["prevent"]))},[(0,i._)("div",pe,null,512),ge],32),we,0===e.byReviews.length?((0,i.wg)(),(0,i.iD)("p",be,"None")):(0,i.kq)("v-if",!0),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.byReviews,(function(t){return(0,i.wg)(),(0,i.iD)("div",ye,[(0,i._)("h3",{class:(0,i.C_)(t.reviewee.atLeast(e.staffRole)?"staff":"")},[(0,i.Uk)((0,i.zw)(o.formatTime(t.time))+" ",1),"reviewee"===t.meta.review.context?((0,i.wg)(),(0,i.iD)("span",ke,"Chat by "+(0,i.zw)(t.reviewee.name),1)):((0,i.wg)(),(0,i.iD)("span",_e,"Review by "+(0,i.zw)(n.user.name)+" of "+(0,i.zw)(t.reviewee.name),1)),(0,i._)("span",xe,(0,i.zw)(o.showSubmissions(t)),1)],2),(0,i._)("div",Se,["deleted"===t.meta.review.status?((0,i.wg)(),(0,i.iD)("span",Ae,"Deleted: ")):(0,i.kq)("v-if",!0),(0,i.Uk)((0,i.zw)(t.meta.review.review),1)])])})),256)),Ce,0===e.forReviews.length?((0,i.wg)(),(0,i.iD)("p",De,"None")):(0,i.kq)("v-if",!0),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.forReviews,(function(t){return(0,i.wg)(),(0,i.iD)("div",Re,[(0,i._)("h3",{class:(0,i.C_)(t.reviewer.atLeast(e.staffRole)?"staff":"")},[(0,i.Uk)((0,i.zw)(o.formatTime(t.time))+" ",1),t.reviewer.atLeast(e.staffRole)?((0,i.wg)(),(0,i.iD)("span",$e,"Staff Review")):"reviewer"===t.meta.review.context?((0,i.wg)(),(0,i.iD)("span",Ue,"Review")):((0,i.wg)(),(0,i.iD)("span",Ee,"Chat")),(0,i.Uk)(" by "),"reviewee"===t.meta.review.context?((0,i.wg)(),(0,i.iD)("span",Me,(0,i.zw)(n.user.name)+" to "+(0,i.zw)(t.reviewer.name),1)):((0,i.wg)(),(0,i.iD)("span",Te,(0,i.zw)(t.reviewer.name),1)),(0,i._)("span",Ie,(0,i.zw)(o.showSubmissions(t)),1)],2),(0,i._)("div",Ze,(0,i.zw)(t.meta.review.review),1)])})),256))])}]]);var Be=function(){};Be.setup=function(e){e.Review={reviewsbyfor:Ve},e.components.addRoute({route:"/review/"}),e.tables.add({title:"Review",order:70,api:"/api/review/tables"}),e.components.addRoute({route:"/review/reviewers/:assigntag",component:he,props:!0}),e.course.assignmentLink("review","reviewers","/review/reviewers/:assigntag")},Site.Console&&!Site.Console.Review&&Be.setup(Site.Console)},93814:(e,t,n)=>{n.d(t,{Z:()=>a});var i=n(28742),s=n.n(i),r=n(75336),o=n.n(r)()(s());o.push([e.id,"\ndiv.cl-submissions-bulk p {\n    font-size: 0.9em;\n}\ndiv.cl-submissions-bulk input {\n    width: 5em;\n}\n\n",""]);const a=o},73581:(e,t,n)=>{n.d(t,{Z:()=>a});var i=n(28742),s=n.n(i),r=n(75336),o=n.n(r)()(s());o.push([e.id,"\n.aligncenter[data-v-4138024c] {\n  text-align: center;\n}\n.width38px[data-v-4138024c] {\n  min-width: 38px;\n}\n.aligncontrols[data-v-4138024c] {\n  display: flex;\n  flex-direction: row;\n  justify-content: space-evenly;\n}\n",""]);const a=o},33778:(e,t,n)=>{n.d(t,{Z:()=>a});var i=n(28742),s=n.n(i),r=n(75336),o=n.n(r)()(s());o.push([e.id,"\n.cl-chat-div[data-v-75cb06b6]{\n  cursor: pointer;\n  display: flex;\n  max-height: 48vh;\n  min-height: 10vh;\n  border: solid 1px;\n  overflow-x: hidden;\n  display: flex;\n  flex-direction: column-reverse;\n  margin: 0;\n}\n.cl-chat-bubble[data-v-75cb06b6] {\n  min-width: 40%;\n  max-width: 60%;\n  border: solid 1px;\n  border-radius: 13px;\n  font-size: 12px;\n  padding: 9px 12px;\n  word-wrap: break-word;\n}\n.cl-chat-incoming[data-v-75cb06b6] {\n  float: left;\n  background-color: #eeeeee;\n}\n.cl-chat-outgoing[data-v-75cb06b6]{\n  background-color: #0c5645;\n  color: white;\n  float: right;\n  text-align: left;\n}\n.cl-chat-text[data-v-75cb06b6] {\n  padding: 0;\n  margin: 0;\n}\n.incoming-id[data-v-75cb06b6]{\n  margin:0;\n  color: #204c42;\n  font-weight: bold;\n  font-size: small;\n}\n.cl-chat-format[data-v-75cb06b6] {\n  text-align: right;\n  display: flex;\n  flex-direction: row;\n  justify-content: flex-end;\n}\n.cl-chat-space[data-v-75cb06b6] {\n  margin: 5px;\n}\n.cl-chat-time[data-v-75cb06b6] {\n  opacity: 0.5;\n}\n.cl-chat-input[data-v-75cb06b6] {\n  border: 3px solid;\n  padding-left: 5px;\n}\n.message-div[data-v-75cb06b6] {\n  padding: 5px 10px;\n}\n.message-div[data-v-75cb06b6]:first-child {\n  padding: 5px 10px 10px;\n}\n.form-container[data-v-75cb06b6] {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 30px;\n  margin-top:15px;\n}\ntextarea[data-v-75cb06b6] {\n  display: block;\n  margin: 0 auto;\n  overflow: hidden;\n  resize: none;\n  border-radius: 8px;\n  shadow: black;\n}\n.sendbutton[data-v-75cb06b6]{\n  margin-left: 10px;\n  border-radius: 3px;\n}\n.edit_input[data-v-75cb06b6]{\n  border:3px solid;\n  color: black;\n  border-radius: 8px;\n  width: 100%;\n}\n.button-container[data-v-75cb06b6] {\n  display: grid;\n  grid-template-columns: 0fr min-content 0fr;\n  grid-gap: 5%;\n}\n.confirm[data-v-75cb06b6]{\n  padding: 3px 4px;\n  background-color: #ffffff;\n  color: black;\n  margin-top: 10px;\n  border-radius: 5px;\n  width: 48px;\n  min-width:2vw;\n  font-size:8px;\n  text-align:center;\n}\n\n",""]);const a=o},57784:(e,t,n)=>{n.d(t,{Z:()=>a});var i=n(28742),s=n.n(i),r=n(75336),o=n.n(r)()(s());o.push([e.id,"",""]);const a=o},22724:(e,t,n)=>{n.d(t,{Z:()=>a});var i=n(28742),s=n.n(i),r=n(75336),o=n.n(r)()(s());o.push([e.id,"form[data-v-4948184f]{position:relative}div.to[data-v-4948184f]{margin:1em 0;font-style:italic}div.to>div[data-v-4948184f]{font-style:normal;font-size:.85em}div.to>div span.no-email[data-v-4948184f]{color:red;font-style:italic}div.subject[data-v-4948184f]{margin:1em 0}div.subject label[data-v-4948184f]{font-style:italic}div.subject input[type=text][data-v-4948184f]{display:block;margin:.2em 0 0 0;font-style:normal;width:25em}div.buttons input[data-v-4948184f]{width:6em}",""]);const a=o},26385:(e,t,n)=>{n.d(t,{Z:()=>a});var i=n(28742),s=n.n(i),r=n(75336),o=n.n(r)()(s());o.push([e.id,"div.cl-extensions table td{text-align:left}div.cl-extensions table td>div>input{text-align:center}div.cl-extensions table td:nth-child(4)>div{white-space:nowrap}",""]);const a=o},24466:(e,t,n)=>{n.d(t,{Z:()=>a});var i=n(28742),s=n.n(i),r=n(75336),o=n.n(r)()(s());o.push([e.id,"div.cl-bulk-upload form{margin-bottom:1em}div.cl-bulk-upload fieldset>div{display:flex;flex-direction:row;flex-wrap:nowrap}div.cl-bulk-upload fieldset>div>div{padding-right:1em}div.cl-bulk-upload fieldset>div>div p{margin:0 0 .5em 0}div.cl-bulk-upload fieldset>div>div p:last-child{margin:0}div.cl-bulk-upload fieldset>div>div p:last-child input{width:6.5em}div.cl-bulk-upload-dlg{width:400px}",""]);const a=o},74271:(e,t,n)=>{n.d(t,{Z:()=>a});var i=n(28742),s=n.n(i),r=n(75336),o=n.n(r)()(s());o.push([e.id,"div#drops-component[data-v-23f2b753]{padding:1em}div#drops-component th[data-v-23f2b753]:first-child{text-align:center;vertical-align:bottom}",""]);const a=o},99582:(e,t,n)=>{n.d(t,{Z:()=>a});var i=n(28742),s=n.n(i),r=n(75336),o=n.n(r)()(s());o.push([e.id,"div.cl-section-component[data-v-58756191]{white-space:nowrap;vertical-align:top;font-size:.95em;color:#fff;margin:0;padding:1px 0 0 0}div.cl-section-component>span[data-v-58756191]{padding:0 .4em 0 0}div.cl-section-component>span[data-v-58756191]:last-child{padding:0}",""]);const a=o},71621:(e,t,n)=>{n.d(t,{Z:()=>a});var i=n(28742),s=n.n(i),r=n(75336),o=n.n(r)()(s());o.push([e.id,"select[data-v-2e27ec9c]{font-size:.95em;background:#fff;color:#000}",""]);const a=o},99018:(e,t,n)=>{n.d(t,{Z:()=>a});var i=n(28742),s=n.n(i),r=n(75336),o=n.n(r)()(s());o.push([e.id,"div.cl-reviewing td.cl-empty{background-color:#e8f7f3}p.cl-reviews-none{text-align:center;color:#00723f;font-style:italic}div.cl-reviews h3{text-align:center;background:#00723f;color:#fff}div.cl-review{margin:1em 0}div.cl-review h3{font-size:.85em;font-style:italic;font-weight:normal;background:rgba(0,0,0,0);color:#00723f;border-bottom:1px solid #00723f;text-align:left}div.cl-review h3 span.cl-submitted{float:right;color:#00909e;font-size:.9em}div.cl-review h3.staff{color:red}div.cl-review pre{margin:0;white-space:pre-wrap}div.cl-review div.cl-review-present{margin:0;white-space:pre-wrap}",""]);const a=o},7765:(e,t,n)=>{var i=n(43546),s=n.n(i),r=n(19104),o=n.n(r),a=n(85797),l=n.n(a),u=n(74706),c=n.n(u),d=n(10807),m=n.n(d),h=n(37002),f=n.n(h),v=n(99018),p={};p.styleTagTransform=f(),p.setAttributes=c(),p.insert=l().bind(null,"head"),p.domAPI=o(),p.insertStyleElement=m();s()(v.Z,p),v.Z&&v.Z.locals&&v.Z.locals},52497:(e,t,n)=>{n.d(t,{Z:()=>d});var i=n(34802),s={style:{display:"none"},ref:"students-only"},r={key:0,class:"centerbox comp center"};var o=n(97818),a=n(40722),l=n(67687),u=Site.FetcherVue;const c={props:{fetching:{type:Boolean,default:!1}},data:function(){return{students:!1,studentsElement:null}},methods:{fetchMore:function(){this.$store.dispatch("members/more")},addStudentsOnly:function(){this.students=l.m.get();var e=this.$refs["students-only"];e.parentNode.removeChild(e),document.querySelector("div.cl-section-component span.extra").appendChild(e),e.style.display="inline-block",this.studentsElement=e},studentsOnlyChanged:function(){l.m.set(this.students)}},computed:(0,o.rn)({users:function(e){return this.students?e.members.users.filter((function(e){return e.role()===a.N.STUDENT})):e.members.users},fetcher:function(e){return e.members.fetcher}}),components:{fetcher:u},mounted:function(){var e=this;this.students=l.m.get();var t=this.$store.state.user.user.member,n={semester:t.semester,section:t.section};this.$store.commit("members/query",n),this.$store.dispatch("members/fetch"),setTimeout((function(){e.addStudentsOnly()}),100)},beforeUnmount:function(){this.studentsElement.parentNode.removeChild(this.studentsElement);document.querySelectorAll("div.cl-section-component span.extra")}};const d=(0,n(17944).Z)(c,[["render",function(e,t,n,o,a,l){var u=(0,i.up)("fetcher");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i._)("label",s,[(0,i.wy)((0,i._)("input",{type:"checkbox","onUpdate:modelValue":t[0]||(t[0]=function(t){return e.students=t}),onChange:t[1]||(t[1]=function(){return l.studentsOnlyChanged&&l.studentsOnlyChanged.apply(l,arguments)})},null,544),[[i.e8,e.students]]),(0,i.Uk)(" Students Only")],512),(0,i.Wm)(u,{fetcher:e.fetcher,fetching:n.fetching},{default:(0,i.w5)((function(){return[(0,i.WI)(e.$slots,"default",{users:e.users,students:e.students}),0==e.users.length?((0,i.wg)(),(0,i.iD)("p",r," There are currently no members enrolled in this section.")):(0,i.kq)("v-if",!0)]})),_:3},8,["fetcher","fetching"])])}]])},71319:(e,t,n)=>{n.d(t,{Z:()=>te});var i=n(34802);var s=function(e){return(0,i.dD)("data-v-75cb06b6"),e=e(),(0,i.Cn)(),e},r={class:"cl-reviewChat"},o={class:"incoming-id"},a={key:0},l={key:1},u={class:"cl-chat-div"},c={key:0,class:"message-div"},d={key:0,class:"cl-review-present cl-chat-bubble cl-chat-outgoing"},m=["id"],h=["id"],f=["value"],v=["id"],p={class:"button-container"},g=["onClick"],w=["onClick"],b={class:"cl-chat-format"},y=["id","onClick"],k=[s((function(){return(0,i._)("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAV0lEQVQ4jWNgGHYgFIhT8MgnQ9XgBCDN/4C4CItcEVQumZArCoD4PxBXIokVQsUqCGnGZgjJmtENIUszA5LN6N4hSXMFA/YwIVozDBBtCMXRSHFCGoIAAE1zHz92RVgEAAAAAElFTkSuQmCC"},null,-1)}))],_=["id","onClick"],x=[s((function(){return(0,i._)("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAACXBIWXMAAAsTAAALEwEAmpwYAAAApElEQVQ4jWNgIA2wArEOEAuQqA8M9IH4DhD/B+LvQBxPimYDIH4DxPugLugG4m9AzE+K5r1AzIXkGpBLtMjRzAV1yS0GSJiQrHkvVFwfn2aQ5GsgPgjEPEia9wDxOyA2GYaalRnwB5gBPs0gUA/ET8jVDAJHgXgOqc6GAVBy/A3EC4B4LtQlRNsMAm4MkGQJMuQIA8Q7SsRqBgEOIHZnIDJjoAMALDQzmk2wKtgAAAAASUVORK5CYII="},null,-1)}))],S={class:"cl-chat-time cl-chat-space"},A=["onClick"],C={class:"cl-chat-time"},D={class:"cl-chat-time"},R={ref:"textArea",class:"cl-chat-input",rows:"1",cols:"78",contenteditable:"true"},$=s((function(){return(0,i._)("input",{type:"submit",value:"Send",class:"sendbutton"},null,-1)}));var U={class:"cl-reviewAnnotation"},E={key:0,class:"cl-preview"},M={class:"cl-review-diagram"},T=["src"],I=["innerHTML","height","width"];const Z={props:["chat","review"],inheritAttrs:!1,data:function(){return{annotation:null,width:null,height:null,image_src:null}},mounted:function(){},methods:{},watch:{review:function(e){this.annotation=e.annotation.annotation,this.width=e.annotation.width,this.height=e.annotation.height,this.image_src=this.$site.root+"/cl/course/submission/view/"+Object.values(e.submissions)[0].id}}};var N=n(17944);var z=function(e,t,n){this.reviewChat=n,this.chat_id=t,this.chat=null,this.startPolling=function(){var t=this;e.polling.addClient("chat"+this.chat_hash,(function(e){e.chat={chat_id:t.chat_id}}),(function(e){t.take(e)}))},this.endPolling=function(){e.polling.removeClient("chat"+this.chat_hash)},this.take=function(e){var t=this;this.reviewChat.chat=e.getData("reviewing").attributes.filter((function(e){return t.chat_id===e.by}))};this.chat_hash=function(e){for(var t="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i=0;i<e;i++)t+=n.charAt(Math.floor(62*Math.random()));return t}(32)};function j(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return V(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return V(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,s=function(){};return{s,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:s}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){a=!0,r=e},f:function(){try{o||null==n.return||n.return()}finally{if(a)throw r}}}}function V(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}const B={props:["json","context","chat_id","anon_index"],emit:["submit"],inheritAttrs:!1,data:function(){return{chat:this.json.reviewing.filter(this.filterChatId),selected_review:null,incoming:"reviewer"===this.context?"reviewee":"reviewer",recipient:"",polling:null,showForm:!1,showEdit:!1}},components:{reviewAnnotation:(0,N.Z)(Z,[["render",function(e,t,n,s,r,o){return(0,i.wg)(),(0,i.iD)("div",U,[(0,i.kq)(' <figure v-if="previewImg !== null" class="cl-preview"> '),null!==e.annotation?((0,i.wg)(),(0,i.iD)("figure",E,[(0,i._)("div",M,[(0,i._)("img",{src:e.image_src},null,8,T),((0,i.wg)(),(0,i.iD)("svg",{xmlns:"http://www.w3.org/2000/svg",innerHTML:e.annotation,height:e.height,width:e.width},null,8,I))])])):(0,i.kq)("v-if",!0)])}]])},mounted:function(){var e,t={},n=j(this.json.submissions);try{for(n.s();!(e=n.n()).done;){var i=e.value;t[i.tag]={id:i.id,date:i.date}}}catch(e){n.e(e)}finally{n.f()}var s=this.$refs.textArea;s.addEventListener("input",(function(){s.style.height="auto",s.style.height="".concat(s.scrollHeight,"px")})),this.submissions=t,"-1"!=this.chat_id&&(this.polling=new z(this.$site,this.chat_id,this),this.polling.startPolling()),this.setName()},beforeDestroy:function(){"-1"!=this.chat_id&&this.polling.endPolling()},methods:{submit:function(){var e=this,t=this.$el.querySelector("textarea").value.trim();if(""!==t){var n={type:"text/plain",text:t,submissions:this.submissions,context:this.context};this.$site.api.post("/api/review/review/".concat(this.chat_id),n).then((function(t){if(t.hasError())e.$site.toast(e,t);else{e.$el.querySelector("textarea").value="",e.$nextTick((function(){e.$refs.textArea.style.height=""}));var n=t.getData("reviewing").attributes;e.chat.unshift({by:e.chat_id,review:n.meta.review.review,time:n.time,context:n.meta.review.context}),e.$emit("submit",n.id),e.chat[0].status="displayed"}})).catch((function(t){e.$site.toast(e,t)}))}else Site.toast(this,"You must enter some text to submit")},saveEdit:function(e,t){var n=this,i=document.getElementById("youText"+e).value.trim();""==i&&(i=t);var s={type:"text/plain",text:i};this.$site.api.post("/api/review/editReview/".concat(e),s).then((function(t){if(t.hasError())n.$site.toast(n,t);else{document.getElementById("del"+e),document.getElementById("edit"+e);document.getElementById("show"+e).style.display="none",document.getElementById("p"+e).style.display="block",n.$site.toast(n,"Edit Saved!")}})).catch((function(e){console.log(e)}))},cancel:function(e){document.getElementById("show"+e).style.display="none",document.getElementById("p"+e).style.display="block"},formatTime:function(e){return this.$site.TimeFormatter.relativeUNIX(e,null)},filterChatId:function(e){return this.chat_id==e.by},setName:function(){if(""===this.recipient&&0!==this.chat.length)if(!0===this.chat[0].anonymous){var e="A".charCodeAt(0)+this.anon_index;this.recipient="Student "+String.fromCharCode(e)}else this.recipient=this.chat[0][this.incoming]},deleteContent:function(e){var t=this;new this.$site.Dialog.MessageBox("Are You Sure?","Are you sure you want to delete this message?",this.$site.Dialog.MessageBox.OKCANCEL,(function(){t.$site.api.post("/api/review/removeReview/".concat(e)).then((function(n){if(n.hasError())t.$site.toast(t,n);else{document.getElementById("del"+e),document.getElementById("edit"+e);t.$site.toast(t,"Message Deleted!")}})).catch((function(e){t.$site.toast(t,e)}))}))},editContent:function(e,t){var n=document.getElementById("show"+e),i=document.getElementById("p"+e),s=document.getElementById("youText"+e);"block"==n.style.display?(n.style.display="none",i.style.display="block",s.value=t):(n.style.display="block",i.style.display="none",s.value=t)}}};var q=n(43546),L=n.n(q),O=n(19104),H=n.n(O),K=n(85797),Y=n.n(K),F=n(74706),W=n.n(F),P=n(10807),Q=n.n(P),X=n(37002),G=n.n(X),J=n(33778),ee={};ee.styleTagTransform=G(),ee.setAttributes=W(),ee.insert=Y().bind(null,"head"),ee.domAPI=H(),ee.insertStyleElement=Q();L()(J.Z,ee);J.Z&&J.Z.locals&&J.Z.locals;const te=(0,N.Z)(B,[["render",function(e,t,n,s,U,E){var M=(0,i.up)("review-annotation");return(0,i.wg)(),(0,i.iD)("div",r,[(0,i.wy)((0,i._)("p",o,[(0,i.Uk)("R"+(0,i.zw)(e.incoming.slice(1))+": ",1),"-1"!==n.chat_id?((0,i.wg)(),(0,i.iD)("span",a,(0,i.zw)(e.recipient),1)):((0,i.wg)(),(0,i.iD)("span",l,"Staff"))],512),[[i.F8,0!==e.chat.length]]),(0,i.wy)((0,i._)("div",u,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.chat,(function(s){return(0,i.wg)(),(0,i.iD)("div",null,["displayed"==s.status||"staff"==s.context?((0,i.wg)(),(0,i.iD)("div",c,[(0,i.kq)(" Outgoing messages"),s.context!==n.context||s.by!=n.chat_id||"displayed"!=s.status&&"staff"!=s.context?null!==s.annotation?((0,i.wg)(),(0,i.iD)(i.HY,{key:1},[(0,i.kq)(" Incoming chats"),"displayed"==s.status||"staff"==s.context?((0,i.wg)(),(0,i.iD)("div",{key:0,onClick:t[1]||(t[1]=(0,i.iM)((function(){}),["stop"])),class:"cl-review-present cl-chat-bubble cl-chat-incoming cl_chat_annotation"},[(0,i._)("a",{href:"#",onClick:(0,i.iM)((function(t){e.selected_review=s}),["prevent"])},(0,i.zw)(s.review),9,A),(0,i._)("div",C,(0,i.zw)(E.formatTime(s.time)),1)])):(0,i.kq)("v-if",!0)],2112)):((0,i.wg)(),(0,i.iD)("div",{key:2,onClick:t[2]||(t[2]=(0,i.iM)((function(){}),["stop"])),class:"cl-review-present cl-chat-bubble cl-chat-incoming"},[(0,i.Uk)((0,i.zw)(s.review)+" ",1),(0,i._)("div",D,(0,i.zw)(E.formatTime(s.time)),1)])):((0,i.wg)(),(0,i.iD)("div",d,[(0,i._)("p",{id:"p"+s.id,class:"cl-chat-text"},(0,i.zw)(s.review),9,m),(0,i._)("form",{action:"",id:"show"+s.id,style:{display:"none"},method:"post",onClick:t[0]||(t[0]=(0,i.iM)((function(){}),["stop"]))},[(0,i._)("input",{type:"hidden",name:"reviewID",value:s.id},null,8,f),(0,i._)("input",{id:"youText"+s.id,type:"text",name:"review",class:"edit_input",value:""},null,8,v),(0,i._)("div",p,[(0,i._)("div",{class:"confirm",onClick:(0,i.iM)((function(e){return E.saveEdit(s.id,s.review)}),["stop"])},"Save",8,g),(0,i._)("div",{class:"confirm",onClick:(0,i.iM)((function(e){return E.cancel(s.id)}),["stop"])},"Cancel",8,w)])],8,h),(0,i._)("div",b,[(0,i._)("button",{id:"del"+s.id,title:"Delete",onClick:(0,i.iM)((function(e){return E.deleteContent(s.id)}),["stop"])},k,8,y),(0,i._)("button",{id:"edit"+s.id,title:"Edit",onClick:(0,i.iM)((function(e){return E.editContent(s.id,s.review)}),["stop"])},x,8,_),(0,i._)("div",S,(0,i.zw)(E.formatTime(s.time)),1)])]))])):(0,i.kq)("v-if",!0)])})),256))],512),[[i.F8,0!==e.chat.length]]),(0,i.wy)((0,i._)("form",{id:"form",method:"post",onSubmit:t[3]||(t[3]=(0,i.iM)((function(){return E.submit&&E.submit.apply(E,arguments)}),["prevent"])),class:"form-container",onClick:t[4]||(t[4]=(0,i.iM)((function(){}),["stop"]))},[(0,i._)("textarea",R,null,512),$],544),[[i.F8,!(0===e.chat.length&&"reviewee"===n.context)&&"-1"!==n.chat_id]]),(0,i._)("div",{onClick:t[5]||(t[5]=(0,i.iM)((function(){}),["stop"]))},[(0,i.Wm)(M,{chat:e.chat,review:e.selected_review},null,8,["chat","review"])])])}],["__scopeId","data-v-75cb06b6"]])},66689:(e,t,n)=>{n.d(t,{Z:()=>u});var i=n(34802),s={class:"cl-reviews"},r=(0,i._)("h3",null,"Reviews of this assignment appear here.",-1),o={key:0,class:"cl-reviews-none"},a={class:"cl-review"};const l={props:["json"],data:function(){return{assignTag:"",shownAnnotation:null,reviewing:[],context:"reviewee"}},components:{reviewChat:n(71319).Z},mounted:function(){this.assignTag=this.json.assignTag,this.reviewing=this.json.reviewing},methods:{formatTime:function(e){return this.$site.TimeFormatter.relativeUNIX(e,null)},showSubmissions:function(e){var t="";for(var n in e.submissions)""!==t&&(t+=" / "),t+=this.$site.TimeFormatter.absoluteUNIX(e.submissions[n].date);return""===t?"":"Submission: "+t},show:function(e,t,n,i){this.shownAnnotation={svg:e,width:t,height:n,image_src:i}}}};const u=(0,n(17944).Z)(l,[["render",function(e,t,n,l,u,c){var d=(0,i.up)("review-chat");return(0,i.wg)(),(0,i.iD)("div",s,[r,0===e.reviewing.length?((0,i.wg)(),(0,i.iD)("p",o,"*** None Yet ***")):(0,i.kq)("v-if",!0),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.json.ids,(function(t,s){return(0,i.wg)(),(0,i.iD)("div",a,[(0,i.Wm)(d,{json:n.json,context:e.context,chat_id:t[0],anon_index:s},null,8,["json","context","chat_id","anon_index"])])})),256))])}]])},46149:(e,t,n)=>{n.d(t,{Z:()=>i});const i={methods:{close:function(){this.$dialog.close()}}}}},e=>{e.O(0,[736,828,77,530,592],(()=>{return t=63901,e(e.s=t);var t}));e.O()}]);